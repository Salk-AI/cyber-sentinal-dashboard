"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EpluginSettingType = exports.Configuration = void 0;
var _lodash = require("lodash");
var _settings2 = require("./settings");
var _fileSize = require("./file-size");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
let EpluginSettingType = exports.EpluginSettingType = /*#__PURE__*/function (EpluginSettingType) {
  EpluginSettingType["text"] = "text";
  EpluginSettingType["password"] = "password";
  EpluginSettingType["textarea"] = "textarea";
  EpluginSettingType["switch"] = "switch";
  EpluginSettingType["number"] = "number";
  EpluginSettingType["editor"] = "editor";
  EpluginSettingType["select"] = "select";
  EpluginSettingType["filepicker"] = "filepicker";
  return EpluginSettingType;
}({});
class Configuration {
  constructor(logger, store) {
    this.logger = logger;
    _defineProperty(this, "store", null);
    _defineProperty(this, "_settings", void 0);
    _defineProperty(this, "_categories", void 0);
    this._settings = new Map();
    this._categories = new Map();
    this.setStore(store);
  }
  setStore(store) {
    this.store = store;
    this.store.setConfiguration(this);
  }
  async setup(dependencies = {}) {
    return this.store.setup(dependencies);
  }
  async start(dependencies = {}) {
    return this.store.start(dependencies);
  }
  async stop(dependencies = {}) {
    return this.store.stop(dependencies);
  }
  /**
   * Register a setting
   * @param id
   * @param value
   */
  register(id, value) {
    if (!this._settings.has(id)) {
      // Enhance the setting
      const enhancedValue = value;
      // Enhance the description
      enhancedValue._description = value.description;
      enhancedValue.description = this.enhanceSettingDescription(value);
      // Register the setting
      this._settings.set(id, enhancedValue);
      this.logger.debug(`Registered ${id}`);
    } else {
      const message = `Setting ${id} exists`;
      this.logger.error(message);
      throw new Error(message);
    }
  }
  checkRequirementsOnUpdatedSettings(settings) {
    return {
      requiresRunningHealthCheck: settings.some(key => {
        var _this$_settings$get;
        return (_this$_settings$get = this._settings.get(key)) === null || _this$_settings$get === void 0 ? void 0 : _this$_settings$get.requiresRunningHealthCheck;
      }),
      requiresReloadingBrowserTab: settings.some(key => {
        var _this$_settings$get2;
        return (_this$_settings$get2 = this._settings.get(key)) === null || _this$_settings$get2 === void 0 ? void 0 : _this$_settings$get2.requiresReloadingBrowserTab;
      }),
      requiresRestartingPluginPlatform: settings.some(key => {
        var _this$_settings$get3;
        return (_this$_settings$get3 = this._settings.get(key)) === null || _this$_settings$get3 === void 0 ? void 0 : _this$_settings$get3.requiresRestartingPluginPlatform;
      })
    };
  }

  /**
   * Special: Get the value for a setting from a value or someone of the default values. This is used for the settings of customization to get the hidden default value, because the default value is empty to not to be displayed on the App Settings
   * It retunts defaultValueIfNotSet or defaultValue
   * @param settingKey
   * @param value
   * @returns
   */
  getSettingValueIfNotSet(settingKey, value) {
    this.logger.debug(`Getting value for [${settingKey}]: stored [${JSON.stringify(value)}]`);
    if (!this._settings.has(settingKey)) {
      throw new Error(`${settingKey} is not registered`);
    }
    if (typeof value !== 'undefined') {
      return value;
    }
    const setting = this._settings.get(settingKey);
    const finalValue = typeof setting.defaultValueIfNotSet !== 'undefined' ? setting.defaultValueIfNotSet : setting.defaultValue;
    this.logger.debug(`Value for [${settingKey}]: [${JSON.stringify(finalValue)}]`);
    return finalValue;
  }

  /**
   * Get the value for a setting from a value or someone of the default values:
   * It returns defaultValue
   * @param settingKey
   * @param value
   * @returns
   */
  getSettingValue(settingKey, value) {
    this.logger.debug(`Getting value for [${settingKey}]: stored [${JSON.stringify(value)}]`);
    if (!this._settings.has(settingKey)) {
      throw new Error(`${settingKey} is not registered`);
    }
    if (typeof value !== 'undefined') {
      return value;
    }
    const setting = this._settings.get(settingKey);
    const finalValue = setting.defaultValue;
    this.logger.debug(`Value for [${settingKey}]: [${JSON.stringify(finalValue)}]`);
    return finalValue;
  }
  /**
   * Get the value for all settings or a subset of them
   * @param rest
   * @returns
   */
  async get(...settings) {
    this.logger.debug(settings.length ? `Getting settings [${settings.join(',')}]` : 'Getting settings');
    const stored = await this.store.get(...settings);
    this.logger.debug(`configuration stored: ${JSON.stringify({
      stored
    })}`);
    const result = settings && settings.length === 1 ? this.getSettingValue(settings[0], stored[settings[0]]) : (settings.length > 1 ? settings : Array.from(this._settings.keys())).reduce((accum, key) => ({
      ...accum,
      [key]: this.getSettingValue(key, stored[key])
    }), {});

    // Clone the result. This avoids the object reference can be changed when managing the result.
    return (0, _lodash.cloneDeep)(result);
  }
  /**
   * Set a the value for a subset of settings
   * @param settings
   * @returns
   */
  async set(settings) {
    const settingsAreRegistered = Object.entries(settings).map(([key]) => this._settings.has(key) ? null : `${key} is not registered`).filter(value => value);
    if (settingsAreRegistered.length) {
      throw new Error(`${settingsAreRegistered.join(', ')} are not registered`);
    }
    const validationErrors = Object.entries(settings).map(([key, value]) => {
      var _this$_settings$get4, _this$_settings$get4$;
      const validationError = (_this$_settings$get4 = this._settings.get(key)) === null || _this$_settings$get4 === void 0 || (_this$_settings$get4$ = _this$_settings$get4.validate) === null || _this$_settings$get4$ === void 0 ? void 0 : _this$_settings$get4$.call(_this$_settings$get4, value);
      return validationError ? `setting [${key}]: ${validationError}` : undefined;
    }).filter(value => value);
    if (validationErrors.length) {
      throw new Error(`Validation errors: ${validationErrors.join('\n')}`);
    }
    const responseStore = await this.store.set(settings);
    return {
      requirements: this.checkRequirementsOnUpdatedSettings(Object.keys(responseStore)),
      update: responseStore
    };
  }

  /**
   * Clean the values for all settings or a subset of them
   * @param rest
   * @returns
   */
  async clear(...settings) {
    if (settings.length) {
      this.logger.debug(`Clean settings: ${settings.join(', ')}`);
      const responseStore = await this.store.clear(...settings);
      this.logger.info('Settings were cleared');
      return {
        requirements: this.checkRequirementsOnUpdatedSettings(Object.keys(responseStore)),
        update: responseStore
      };
    } else {
      return await this.clear(...Array.from(this._settings.keys()));
    }
  }

  /**
   * Reset the values for all settings or a subset of them
   * @param settings
   * @returns
   */
  async reset(...settings) {
    if (settings.length) {
      this.logger.debug(`Reset settings: ${settings.join(', ')}`);
      const updatedSettings = settings.reduce((accum, settingKey) => {
        return {
          ...accum,
          [settingKey]: this.getSettingValue(settingKey)
        };
      }, {});
      const responseStore = await this.store.set(updatedSettings);
      this.logger.info('Settings were reset');
      return {
        requirements: this.checkRequirementsOnUpdatedSettings(Object.keys(responseStore)),
        update: responseStore
      };
    } else {
      return await this.reset(...this._settings.keys());
    }
  }
  registerCategory({
    id,
    ...rest
  }) {
    if (this._categories.has(id)) {
      this.logger.error(`Registered category [${id}]`);
      throw new Error(`Category exists [${id}]`);
    }
    this._categories.set(id, rest);
    this.logger.debug(`Registered category [${id}]`);
  }
  getUniqueCategories() {
    return [...new Set(Array.from(this._settings.entries()).filter(([, {
      isConfigurableFromSettings
    }]) => isConfigurableFromSettings).map(([, {
      category
    }]) => category))].map(categoryID => this._categories.get(String(categoryID))).sort((categoryA, categoryB) => {
      if (categoryA.title > categoryB.title) {
        return 1;
      } else if (categoryA.title < categoryB.title) {
        return -1;
      }
      return 0;
    });
  }
  enhanceSettingDescription(setting) {
    var _options$file, _options$file2, _options$file3, _options$file4;
    const {
      description,
      options
    } = setting;
    return [description, ...(options !== null && options !== void 0 && options.select ? [`Allowed values: ${options.select.map(({
      text,
      value
    }) => (0, _settings2.formatLabelValuePair)(text, value)).join(', ')}.`] : []), ...(options !== null && options !== void 0 && options.switch ? [`Allowed values: ${['enabled', 'disabled'].map(s => (0, _settings2.formatLabelValuePair)(options.switch.values[s].label, options.switch.values[s].value)).join(', ')}.`] : []), ...(options !== null && options !== void 0 && options.number && 'min' in options.number ? [`Minimum value: ${options.number.min}.`] : []), ...(options !== null && options !== void 0 && options.number && 'max' in options.number ? [`Maximum value: ${options.number.max}.`] : []),
    // File extensions
    ...(options !== null && options !== void 0 && (_options$file = options.file) !== null && _options$file !== void 0 && _options$file.extensions ? [`Supported extensions: ${options.file.extensions.join(', ')}.`] : []),
    // File recommended dimensions
    ...(options !== null && options !== void 0 && (_options$file2 = options.file) !== null && _options$file2 !== void 0 && (_options$file2 = _options$file2.recommended) !== null && _options$file2 !== void 0 && _options$file2.dimensions ? [`Recommended dimensions: ${options.file.recommended.dimensions.width}x${options.file.recommended.dimensions.height}${options.file.recommended.dimensions.unit || ''}.`] : []),
    // File size
    ...(options !== null && options !== void 0 && (_options$file3 = options.file) !== null && _options$file3 !== void 0 && _options$file3.size && typeof options.file.size.minBytes !== 'undefined' ? [`Minimum file size: ${(0, _fileSize.formatBytes)(options.file.size.minBytes)}.`] : []), ...(options !== null && options !== void 0 && (_options$file4 = options.file) !== null && _options$file4 !== void 0 && _options$file4.size && typeof options.file.size.maxBytes !== 'undefined' ? [`Maximum file size: ${(0, _fileSize.formatBytes)(options.file.size.maxBytes)}.`] : []),
    // Multi line text
    ...(options !== null && options !== void 0 && options.maxRows && typeof options.maxRows !== 'undefined' ? [`Maximum amount of lines: ${options.maxRows}.`] : []), ...(options !== null && options !== void 0 && options.minRows && typeof options.minRows !== 'undefined' ? [`Minimum amount of lines: ${options.minRows}.`] : []), ...(options !== null && options !== void 0 && options.maxLength && typeof options.maxLength !== 'undefined' ? [`Maximum lines length is ${options.maxLength} characters.`] : [])].join(' ');
  }
  groupSettingsByCategory(_settings = null, filterFunction = null) {
    const settings = (_settings && Array.isArray(_settings) ? Array.from(this._settings.entries()).filter(([key]) => _settings.includes(key)) : Array.from(this._settings.entries())).map(([key, value]) => ({
      ...value,
      key
    }));
    const settingsSortedByCategories = (filterFunction ? settings.filter(filterFunction) : settings).sort((settingA, settingB) => {
      var _settingA$key, _settingA$key$localeC;
      return (_settingA$key = settingA.key) === null || _settingA$key === void 0 || (_settingA$key$localeC = _settingA$key.localeCompare) === null || _settingA$key$localeC === void 0 ? void 0 : _settingA$key$localeC.call(_settingA$key, settingB.key);
    }).reduce((accum, pluginSettingConfiguration) => ({
      ...accum,
      [pluginSettingConfiguration.category]: [...(accum[pluginSettingConfiguration.category] || []), {
        ...pluginSettingConfiguration
      }]
    }), {});
    return Object.entries(settingsSortedByCategories).map(([category, settings]) => ({
      category: this._categories.get(String(category)),
      settings
    })).filter(categoryEntry => categoryEntry.settings.length);
  }
}
exports.Configuration = Configuration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwicmVxdWlyZSIsIl9zZXR0aW5nczIiLCJfZmlsZVNpemUiLCJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiRXBsdWdpblNldHRpbmdUeXBlIiwiZXhwb3J0cyIsIkNvbmZpZ3VyYXRpb24iLCJjb25zdHJ1Y3RvciIsImxvZ2dlciIsInN0b3JlIiwiX3NldHRpbmdzIiwiTWFwIiwiX2NhdGVnb3JpZXMiLCJzZXRTdG9yZSIsInNldENvbmZpZ3VyYXRpb24iLCJzZXR1cCIsImRlcGVuZGVuY2llcyIsInN0YXJ0Iiwic3RvcCIsInJlZ2lzdGVyIiwiaWQiLCJoYXMiLCJlbmhhbmNlZFZhbHVlIiwiX2Rlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJlbmhhbmNlU2V0dGluZ0Rlc2NyaXB0aW9uIiwic2V0IiwiZGVidWciLCJtZXNzYWdlIiwiZXJyb3IiLCJFcnJvciIsImNoZWNrUmVxdWlyZW1lbnRzT25VcGRhdGVkU2V0dGluZ3MiLCJzZXR0aW5ncyIsInJlcXVpcmVzUnVubmluZ0hlYWx0aENoZWNrIiwic29tZSIsIl90aGlzJF9zZXR0aW5ncyRnZXQiLCJnZXQiLCJyZXF1aXJlc1JlbG9hZGluZ0Jyb3dzZXJUYWIiLCJfdGhpcyRfc2V0dGluZ3MkZ2V0MiIsInJlcXVpcmVzUmVzdGFydGluZ1BsdWdpblBsYXRmb3JtIiwiX3RoaXMkX3NldHRpbmdzJGdldDMiLCJnZXRTZXR0aW5nVmFsdWVJZk5vdFNldCIsInNldHRpbmdLZXkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0dGluZyIsImZpbmFsVmFsdWUiLCJkZWZhdWx0VmFsdWVJZk5vdFNldCIsImRlZmF1bHRWYWx1ZSIsImdldFNldHRpbmdWYWx1ZSIsImxlbmd0aCIsImpvaW4iLCJzdG9yZWQiLCJyZXN1bHQiLCJBcnJheSIsImZyb20iLCJrZXlzIiwicmVkdWNlIiwiYWNjdW0iLCJjbG9uZURlZXAiLCJzZXR0aW5nc0FyZVJlZ2lzdGVyZWQiLCJlbnRyaWVzIiwibWFwIiwiZmlsdGVyIiwidmFsaWRhdGlvbkVycm9ycyIsIl90aGlzJF9zZXR0aW5ncyRnZXQ0IiwiX3RoaXMkX3NldHRpbmdzJGdldDQkIiwidmFsaWRhdGlvbkVycm9yIiwidmFsaWRhdGUiLCJyZXNwb25zZVN0b3JlIiwicmVxdWlyZW1lbnRzIiwidXBkYXRlIiwiY2xlYXIiLCJpbmZvIiwicmVzZXQiLCJ1cGRhdGVkU2V0dGluZ3MiLCJyZWdpc3RlckNhdGVnb3J5IiwicmVzdCIsImdldFVuaXF1ZUNhdGVnb3JpZXMiLCJTZXQiLCJpc0NvbmZpZ3VyYWJsZUZyb21TZXR0aW5ncyIsImNhdGVnb3J5IiwiY2F0ZWdvcnlJRCIsInNvcnQiLCJjYXRlZ29yeUEiLCJjYXRlZ29yeUIiLCJ0aXRsZSIsIl9vcHRpb25zJGZpbGUiLCJfb3B0aW9ucyRmaWxlMiIsIl9vcHRpb25zJGZpbGUzIiwiX29wdGlvbnMkZmlsZTQiLCJvcHRpb25zIiwic2VsZWN0IiwidGV4dCIsImZvcm1hdExhYmVsVmFsdWVQYWlyIiwic3dpdGNoIiwicyIsInZhbHVlcyIsImxhYmVsIiwibnVtYmVyIiwibWluIiwibWF4IiwiZmlsZSIsImV4dGVuc2lvbnMiLCJyZWNvbW1lbmRlZCIsImRpbWVuc2lvbnMiLCJ3aWR0aCIsImhlaWdodCIsInVuaXQiLCJzaXplIiwibWluQnl0ZXMiLCJmb3JtYXRCeXRlcyIsIm1heEJ5dGVzIiwibWF4Um93cyIsIm1pblJvd3MiLCJtYXhMZW5ndGgiLCJncm91cFNldHRpbmdzQnlDYXRlZ29yeSIsImZpbHRlckZ1bmN0aW9uIiwiaXNBcnJheSIsImluY2x1ZGVzIiwic2V0dGluZ3NTb3J0ZWRCeUNhdGVnb3JpZXMiLCJzZXR0aW5nQSIsInNldHRpbmdCIiwiX3NldHRpbmdBJGtleSIsIl9zZXR0aW5nQSRrZXkkbG9jYWxlQyIsImxvY2FsZUNvbXBhcmUiLCJwbHVnaW5TZXR0aW5nQ29uZmlndXJhdGlvbiIsImNhdGVnb3J5RW50cnkiXSwic291cmNlcyI6WyJjb25maWd1cmF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmb3JtYXRMYWJlbFZhbHVlUGFpciB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgZm9ybWF0Qnl0ZXMgfSBmcm9tICcuL2ZpbGUtc2l6ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlciB7XG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQ7XG4gIGluZm8obWVzc2FnZTogc3RyaW5nKTogdm9pZDtcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkO1xufVxuXG50eXBlIFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNQYXNzd29yZCA9IHtcbiAgcGFzc3dvcmQ6IHtcbiAgICBkdWFsPzogJ3RleHQnIHwgJ3Bhc3N3b3JkJyB8ICdkdWFsJztcbiAgfTtcbn07XG5cbnR5cGUgVENvbmZpZ3VyYXRpb25TZXR0aW5nT3B0aW9uc1RleHRBcmVhID0ge1xuICBtYXhSb3dzPzogbnVtYmVyO1xuICBtaW5Sb3dzPzogbnVtYmVyO1xuICBtYXhMZW5ndGg/OiBudW1iZXI7XG59O1xuXG50eXBlIFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNTZWxlY3QgPSB7XG4gIHNlbGVjdDogeyB0ZXh0OiBzdHJpbmc7IHZhbHVlOiBhbnkgfVtdO1xufTtcblxudHlwZSBUQ29uZmlndXJhdGlvblNldHRpbmdPcHRpb25zRWRpdG9yID0ge1xuICBlZGl0b3I6IHtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICB9O1xufTtcblxudHlwZSBUQ29uZmlndXJhdGlvblNldHRpbmdPcHRpb25zRmlsZSA9IHtcbiAgZmlsZToge1xuICAgIHR5cGU6ICdpbWFnZSc7XG4gICAgZXh0ZW5zaW9ucz86IHN0cmluZ1tdO1xuICAgIHNpemU/OiB7XG4gICAgICBtYXhCeXRlcz86IG51bWJlcjtcbiAgICAgIG1pbkJ5dGVzPzogbnVtYmVyO1xuICAgIH07XG4gICAgcmVjb21tZW5kZWQ/OiB7XG4gICAgICBkaW1lbnNpb25zPzoge1xuICAgICAgICB3aWR0aDogbnVtYmVyO1xuICAgICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgdW5pdDogc3RyaW5nO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHN0b3JlPzoge1xuICAgICAgcmVsYXRpdmVQYXRoRmlsZVN5c3RlbTogc3RyaW5nO1xuICAgICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICAgIHJlc29sdmVTdGF0aWNVUkw6IChmaWxlbmFtZTogc3RyaW5nKSA9PiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbn07XG5cbnR5cGUgVENvbmZpZ3VyYXRpb25TZXR0aW5nT3B0aW9uc051bWJlciA9IHtcbiAgbnVtYmVyOiB7XG4gICAgbWluPzogbnVtYmVyO1xuICAgIG1heD86IG51bWJlcjtcbiAgICBpbnRlZ2VyPzogYm9vbGVhbjtcbiAgfTtcbn07XG5cbnR5cGUgVENvbmZpZ3VyYXRpb25TZXR0aW5nT3B0aW9uc1N3aXRjaCA9IHtcbiAgc3dpdGNoOiB7XG4gICAgdmFsdWVzOiB7XG4gICAgICBkaXNhYmxlZDogeyBsYWJlbD86IHN0cmluZzsgdmFsdWU6IGFueSB9O1xuICAgICAgZW5hYmxlZDogeyBsYWJlbD86IHN0cmluZzsgdmFsdWU6IGFueSB9O1xuICAgIH07XG4gIH07XG59O1xuXG5leHBvcnQgZW51bSBFcGx1Z2luU2V0dGluZ1R5cGUge1xuICB0ZXh0ID0gJ3RleHQnLFxuICBwYXNzd29yZCA9ICdwYXNzd29yZCcsXG4gIHRleHRhcmVhID0gJ3RleHRhcmVhJyxcbiAgc3dpdGNoID0gJ3N3aXRjaCcsXG4gIG51bWJlciA9ICdudW1iZXInLFxuICBlZGl0b3IgPSAnZWRpdG9yJyxcbiAgc2VsZWN0ID0gJ3NlbGVjdCcsXG4gIGZpbGVwaWNrZXIgPSAnZmlsZXBpY2tlcicsXG59XG5cbmV4cG9ydCB0eXBlIFRDb25maWd1cmF0aW9uU2V0dGluZyA9IHtcbiAgLy8gRGVmaW5lIHRoZSB0ZXh0IGRpc3BsYXllZCBpbiB0aGUgVUkuXG4gIHRpdGxlOiBzdHJpbmc7XG4gIC8vIERlc2NyaXB0aW9uLlxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAvLyBDYXRlZ29yeS5cbiAgY2F0ZWdvcnk6IG51bWJlcjtcbiAgLy8gVHlwZS5cbiAgdHlwZTogRXBsdWdpblNldHRpbmdUeXBlO1xuICAvLyBEZWZhdWx0IHZhbHVlLlxuICBkZWZhdWx0VmFsdWU6IGFueTtcbiAgLyogU3BlY2lhbDogVGhpcyBpcyB1c2VkIGZvciB0aGUgc2V0dGluZ3Mgb2YgY3VzdG9taXphdGlvbiB0byBnZXQgdGhlIGhpZGRlbiBkZWZhdWx0IHZhbHVlLCBiZWNhdXNlIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGVtcHR5IHRvIG5vdCB0byBiZSBkaXNwbGF5ZWQgb24gdGhlIEFwcCBTZXR0aW5ncy4gKi9cbiAgZGVmYXVsdFZhbHVlSWZOb3RTZXQ/OiBhbnk7XG4gIC8vIENvbmZpZ3VyYWJsZSBmcm9tIHRoZSBjb25maWd1cmF0aW9uIGZpbGUuXG4gIGlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzOiBib29sZWFuO1xuICAvLyBNb2RpZnkgdGhlIHNldHRpbmcgcmVxdWlyZXMgcnVubmluZyB0aGUgcGx1Z2luIGhlYWx0aCBjaGVjayAoZnJvbnRlbmQpLlxuICByZXF1aXJlc1J1bm5pbmdIZWFsdGhDaGVjaz86IGJvb2xlYW47XG4gIC8vIE1vZGlmeSB0aGUgc2V0dGluZyByZXF1aXJlcyByZWxvYWRpbmcgdGhlIGJyb3dzZXIgdGFiIChmcm9udGVuZCkuXG4gIHJlcXVpcmVzUmVsb2FkaW5nQnJvd3NlclRhYj86IGJvb2xlYW47XG4gIC8vIE1vZGlmeSB0aGUgc2V0dGluZyByZXF1aXJlcyByZXN0YXJ0aW5nIHRoZSBwbHVnaW4gcGxhdGZvcm0gdG8gdGFrZSBlZmZlY3QuXG4gIHJlcXVpcmVzUmVzdGFydGluZ1BsdWdpblBsYXRmb3JtPzogYm9vbGVhbjtcbiAgLy8gRGVmaW5lIG9wdGlvbnMgcmVsYXRlZCB0byB0aGUgYHR5cGVgLlxuICBvcHRpb25zPzpcbiAgICB8IFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNFZGl0b3JcbiAgICB8IFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNGaWxlXG4gICAgfCBUQ29uZmlndXJhdGlvblNldHRpbmdPcHRpb25zTnVtYmVyXG4gICAgfCBUQ29uZmlndXJhdGlvblNldHRpbmdPcHRpb25zUGFzc3dvcmRcbiAgICB8IFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNTZWxlY3RcbiAgICB8IFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNTd2l0Y2hcbiAgICB8IFRDb25maWd1cmF0aW9uU2V0dGluZ09wdGlvbnNUZXh0QXJlYTtcbiAgc3RvcmU/OiB7XG4gICAgZmlsZToge1xuICAgICAgLy8gRGVmaW5lIGlmIHRoZSBzZXR0aW5nIGlzIG1hbmFnZWQgYnkgdGhlIENvbmZpZ3VyYXRpb25TdG9yZSBzZXJ2aWNlXG4gICAgICBjb25maWd1cmFibGVNYW5hZ2VkPzogYm9vbGVhbjtcbiAgICAgIC8vIERlZmluZSBhIHRleHQgdG8gcHJpbnQgYXMgdGhlIGRlZmF1bHQgaW4gdGhlIGNvbmZpZ3VyYXRpb24gYmxvY2tcbiAgICAgIGRlZmF1bHRCbG9jaz86IHN0cmluZztcbiAgICAgIC8qIFRyYW5zZm9ybSB0aGUgdmFsdWUgZGVmaW5lZCBpbiB0aGUgY29uZmlndXJhdGlvbiBmaWxlIHRvIGJlIGNvbnN1bWVkIGJ5IHRoZSBDb25maWd1cmF0aW9uXG4gICAgICAgIHNlcnZpY2UgKi9cbiAgICAgIHRyYW5zZm9ybUZyb20/OiAodmFsdWU6IGFueSkgPT4gYW55O1xuICAgIH07XG4gIH07XG4gIC8vIFRyYW5zZm9ybSB0aGUgaW5wdXQgdmFsdWUuIFRoZSByZXN1bHQgaXMgc2F2ZWQgaW4gdGhlIGZvcm0gZ2xvYmFsIHN0YXRlIG9mIFNldHRpbmdzL0NvbmZpZ3VyYXRpb25cbiAgdWlGb3JtVHJhbnNmb3JtQ2hhbmdlZElucHV0VmFsdWU/OiAodmFsdWU6IGFueSkgPT4gYW55O1xuICAvLyBUcmFuc2Zvcm0gdGhlIGNvbmZpZ3VyYXRpb24gdmFsdWUgb3IgZGVmYXVsdCBhcyBpbml0aWFsIHZhbHVlIGZvciB0aGUgaW5wdXQgaW4gU2V0dGluZ3MvQ29uZmlndXJhdGlvblxuICB1aUZvcm1UcmFuc2Zvcm1Db25maWd1cmF0aW9uVmFsdWVUb0lucHV0VmFsdWU/OiAodmFsdWU6IGFueSkgPT4gYW55O1xuICAvLyBUcmFuc2Zvcm0gdGhlIGlucHV0IHZhbHVlIGNoYW5nZWQgaW4gdGhlIGZvcm0gb2YgU2V0dGluZ3MvQ29uZmlndXJhdGlvbiBhbmQgcmV0dXJuZWQgaW4gdGhlIGBjaGFuZ2VkYCBwcm9wZXJ0eSBvZiB0aGUgaG9vayB1c2VGb3JtXG4gIHVpRm9ybVRyYW5zZm9ybUlucHV0VmFsdWVUb0NvbmZpZ3VyYXRpb25WYWx1ZT86ICh2YWx1ZTogYW55KSA9PiBhbnk7XG4gIC8vIFZhbGlkYXRlIHRoZSB2YWx1ZSBpbiB0aGUgZm9ybSBvZiBBcHAgU2V0dGluZ3MuIEl0IHJldHVybnMgYSBzdHJpbmcgaWYgdGhlcmUgaXMgc29tZSB2YWxpZGF0aW9uIGVycm9yLlxuICB2YWxpZGF0ZVVJRm9ybT86ICh2YWx1ZTogYW55KSA9PiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIC8vIFZhbGlkYXRlIGZ1bmN0aW9uIGNyZWF0b3IgdG8gdmFsaWRhdGUgdGhlIHNldHRpbmcgaW4gdGhlIGJhY2tlbmQuXG4gIHZhbGlkYXRlPzogKHNjaGVtYTogYW55KSA9PiAodmFsdWU6IHVua25vd24pID0+IHN0cmluZyB8IHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCB0eXBlIFRDb25maWd1cmF0aW9uU2V0dGluZ1dpdGhLZXkgPSBUQ29uZmlndXJhdGlvblNldHRpbmcgJiB7XG4gIGtleTogc3RyaW5nO1xufTtcbmV4cG9ydCB0eXBlIFRDb25maWd1cmF0aW9uU2V0dGluZ0NhdGVnb3J5ID0ge1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgZG9jdW1lbnRhdGlvbkxpbms/OiBzdHJpbmc7XG4gIHJlbmRlck9yZGVyPzogbnVtYmVyO1xufTtcblxudHlwZSBUQ29uZmlndXJhdGlvblNldHRpbmdzID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpZ3VyYXRpb25TdG9yZSB7XG4gIHNldHVwOiAoKSA9PiBQcm9taXNlPGFueT47XG4gIHN0YXJ0OiAoKSA9PiBQcm9taXNlPGFueT47XG4gIHN0b3A6ICgpID0+IFByb21pc2U8YW55PjtcbiAgZ2V0OiAoLi4uc2V0dGluZ3M6IHN0cmluZ1tdKSA9PiBQcm9taXNlPFRDb25maWd1cmF0aW9uU2V0dGluZ3M+O1xuICBzZXQ6IChzZXR0aW5nczogVENvbmZpZ3VyYXRpb25TZXR0aW5ncykgPT4gUHJvbWlzZTxhbnk+O1xuICBjbGVhcjogKC4uLnNldHRpbmdzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxhbnk+O1xuICBzZXRDb25maWd1cmF0aW9uOiAoY29uZmlndXJhdGlvbjogSUNvbmZpZ3VyYXRpb24pID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpZ3VyYXRpb24ge1xuICBzZXRTdG9yZShzdG9yZTogSUNvbmZpZ3VyYXRpb25TdG9yZSk6IHZvaWQ7XG4gIHNldHVwKCk6IFByb21pc2U8YW55PjtcbiAgc3RhcnQoKTogUHJvbWlzZTxhbnk+O1xuICBzdG9wKCk6IFByb21pc2U8YW55PjtcbiAgcmVnaXN0ZXIoaWQ6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gIGdldCguLi5zZXR0aW5nczogc3RyaW5nW10pOiBQcm9taXNlPFRDb25maWd1cmF0aW9uU2V0dGluZ3M+O1xuICBzZXQoc2V0dGluZ3M6IFRDb25maWd1cmF0aW9uU2V0dGluZ3MpOiBQcm9taXNlPGFueT47XG4gIGNsZWFyKC4uLnNldHRpbmdzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55PjtcbiAgcmVzZXQoLi4uc2V0dGluZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTxhbnk+O1xuICBfc2V0dGluZ3M6IE1hcDxcbiAgICBzdHJpbmcsXG4gICAge1xuICAgICAgW2tleTogc3RyaW5nXTogVENvbmZpZ3VyYXRpb25TZXR0aW5nO1xuICAgIH1cbiAgPjtcbiAgZ2V0U2V0dGluZ1ZhbHVlKHNldHRpbmdLZXk6IHN0cmluZywgdmFsdWU/OiBhbnkpOiBhbnk7XG4gIGdldFNldHRpbmdWYWx1ZUlmTm90U2V0KHNldHRpbmdLZXk6IHN0cmluZywgdmFsdWU/OiBhbnkpOiBhbnk7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9uIGltcGxlbWVudHMgSUNvbmZpZ3VyYXRpb24ge1xuICBzdG9yZTogSUNvbmZpZ3VyYXRpb25TdG9yZSB8IG51bGwgPSBudWxsO1xuICBfc2V0dGluZ3M6IE1hcDxzdHJpbmcsIHsgW2tleTogc3RyaW5nXTogVENvbmZpZ3VyYXRpb25TZXR0aW5nIH0+O1xuICBfY2F0ZWdvcmllczogTWFwPHN0cmluZywgeyBba2V5OiBzdHJpbmddOiBhbnkgfT47XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbG9nZ2VyOiBJTG9nZ2VyLCBzdG9yZTogSUNvbmZpZ3VyYXRpb25TdG9yZSkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2NhdGVnb3JpZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5zZXRTdG9yZShzdG9yZSk7XG4gIH1cbiAgc2V0U3RvcmUoc3RvcmU6IElDb25maWd1cmF0aW9uU3RvcmUpIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5zdG9yZS5zZXRDb25maWd1cmF0aW9uKHRoaXMpO1xuICB9XG4gIGFzeW5jIHNldHVwKGRlcGVuZGVuY2llczogYW55ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5zZXR1cChkZXBlbmRlbmNpZXMpO1xuICB9XG4gIGFzeW5jIHN0YXJ0KGRlcGVuZGVuY2llczogYW55ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5zdGFydChkZXBlbmRlbmNpZXMpO1xuICB9XG4gIGFzeW5jIHN0b3AoZGVwZW5kZW5jaWVzOiBhbnkgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnN0b3AoZGVwZW5kZW5jaWVzKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBzZXR0aW5nXG4gICAqIEBwYXJhbSBpZFxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICovXG4gIHJlZ2lzdGVyKGlkOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAoIXRoaXMuX3NldHRpbmdzLmhhcyhpZCkpIHtcbiAgICAgIC8vIEVuaGFuY2UgdGhlIHNldHRpbmdcbiAgICAgIGNvbnN0IGVuaGFuY2VkVmFsdWUgPSB2YWx1ZTtcbiAgICAgIC8vIEVuaGFuY2UgdGhlIGRlc2NyaXB0aW9uXG4gICAgICBlbmhhbmNlZFZhbHVlLl9kZXNjcmlwdGlvbiA9IHZhbHVlLmRlc2NyaXB0aW9uO1xuICAgICAgZW5oYW5jZWRWYWx1ZS5kZXNjcmlwdGlvbiA9IHRoaXMuZW5oYW5jZVNldHRpbmdEZXNjcmlwdGlvbih2YWx1ZSk7XG4gICAgICAvLyBSZWdpc3RlciB0aGUgc2V0dGluZ1xuICAgICAgdGhpcy5fc2V0dGluZ3Muc2V0KGlkLCBlbmhhbmNlZFZhbHVlKTtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBSZWdpc3RlcmVkICR7aWR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgU2V0dGluZyAke2lkfSBleGlzdHNgO1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1JlcXVpcmVtZW50c09uVXBkYXRlZFNldHRpbmdzKHNldHRpbmdzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1aXJlc1J1bm5pbmdIZWFsdGhDaGVjazogc2V0dGluZ3Muc29tZShcbiAgICAgICAga2V5ID0+IHRoaXMuX3NldHRpbmdzLmdldChrZXkpPy5yZXF1aXJlc1J1bm5pbmdIZWFsdGhDaGVjayxcbiAgICAgICksXG4gICAgICByZXF1aXJlc1JlbG9hZGluZ0Jyb3dzZXJUYWI6IHNldHRpbmdzLnNvbWUoXG4gICAgICAgIGtleSA9PiB0aGlzLl9zZXR0aW5ncy5nZXQoa2V5KT8ucmVxdWlyZXNSZWxvYWRpbmdCcm93c2VyVGFiLFxuICAgICAgKSxcbiAgICAgIHJlcXVpcmVzUmVzdGFydGluZ1BsdWdpblBsYXRmb3JtOiBzZXR0aW5ncy5zb21lKFxuICAgICAgICBrZXkgPT4gdGhpcy5fc2V0dGluZ3MuZ2V0KGtleSk/LnJlcXVpcmVzUmVzdGFydGluZ1BsdWdpblBsYXRmb3JtLFxuICAgICAgKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpYWw6IEdldCB0aGUgdmFsdWUgZm9yIGEgc2V0dGluZyBmcm9tIGEgdmFsdWUgb3Igc29tZW9uZSBvZiB0aGUgZGVmYXVsdCB2YWx1ZXMuIFRoaXMgaXMgdXNlZCBmb3IgdGhlIHNldHRpbmdzIG9mIGN1c3RvbWl6YXRpb24gdG8gZ2V0IHRoZSBoaWRkZW4gZGVmYXVsdCB2YWx1ZSwgYmVjYXVzZSB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBlbXB0eSB0byBub3QgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBBcHAgU2V0dGluZ3NcbiAgICogSXQgcmV0dW50cyBkZWZhdWx0VmFsdWVJZk5vdFNldCBvciBkZWZhdWx0VmFsdWVcbiAgICogQHBhcmFtIHNldHRpbmdLZXlcbiAgICogQHBhcmFtIHZhbHVlXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBnZXRTZXR0aW5nVmFsdWVJZk5vdFNldChzZXR0aW5nS2V5OiBzdHJpbmcsIHZhbHVlPzogYW55KSB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICBgR2V0dGluZyB2YWx1ZSBmb3IgWyR7c2V0dGluZ0tleX1dOiBzdG9yZWQgWyR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfV1gLFxuICAgICk7XG4gICAgaWYgKCF0aGlzLl9zZXR0aW5ncy5oYXMoc2V0dGluZ0tleSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJHtzZXR0aW5nS2V5fSBpcyBub3QgcmVnaXN0ZXJlZGApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5fc2V0dGluZ3MuZ2V0KHNldHRpbmdLZXkpO1xuICAgIGNvbnN0IGZpbmFsVmFsdWUgPVxuICAgICAgdHlwZW9mIHNldHRpbmcuZGVmYXVsdFZhbHVlSWZOb3RTZXQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gc2V0dGluZy5kZWZhdWx0VmFsdWVJZk5vdFNldFxuICAgICAgICA6IHNldHRpbmcuZGVmYXVsdFZhbHVlO1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYFZhbHVlIGZvciBbJHtzZXR0aW5nS2V5fV06IFske0pTT04uc3RyaW5naWZ5KGZpbmFsVmFsdWUpfV1gLFxuICAgICk7XG4gICAgcmV0dXJuIGZpbmFsVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBmb3IgYSBzZXR0aW5nIGZyb20gYSB2YWx1ZSBvciBzb21lb25lIG9mIHRoZSBkZWZhdWx0IHZhbHVlczpcbiAgICogSXQgcmV0dXJucyBkZWZhdWx0VmFsdWVcbiAgICogQHBhcmFtIHNldHRpbmdLZXlcbiAgICogQHBhcmFtIHZhbHVlXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBnZXRTZXR0aW5nVmFsdWUoc2V0dGluZ0tleTogc3RyaW5nLCB2YWx1ZT86IGFueSkge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYEdldHRpbmcgdmFsdWUgZm9yIFske3NldHRpbmdLZXl9XTogc3RvcmVkIFske0pTT04uc3RyaW5naWZ5KHZhbHVlKX1dYCxcbiAgICApO1xuICAgIGlmICghdGhpcy5fc2V0dGluZ3MuaGFzKHNldHRpbmdLZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c2V0dGluZ0tleX0gaXMgbm90IHJlZ2lzdGVyZWRgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMuX3NldHRpbmdzLmdldChzZXR0aW5nS2V5KTtcbiAgICBjb25zdCBmaW5hbFZhbHVlID0gc2V0dGluZy5kZWZhdWx0VmFsdWU7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICBgVmFsdWUgZm9yIFske3NldHRpbmdLZXl9XTogWyR7SlNPTi5zdHJpbmdpZnkoZmluYWxWYWx1ZSl9XWAsXG4gICAgKTtcbiAgICByZXR1cm4gZmluYWxWYWx1ZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBmb3IgYWxsIHNldHRpbmdzIG9yIGEgc3Vic2V0IG9mIHRoZW1cbiAgICogQHBhcmFtIHJlc3RcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGdldCguLi5zZXR0aW5nczogc3RyaW5nW10pIHtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcbiAgICAgIHNldHRpbmdzLmxlbmd0aFxuICAgICAgICA/IGBHZXR0aW5nIHNldHRpbmdzIFske3NldHRpbmdzLmpvaW4oJywnKX1dYFxuICAgICAgICA6ICdHZXR0aW5nIHNldHRpbmdzJyxcbiAgICApO1xuICAgIGNvbnN0IHN0b3JlZCA9IGF3YWl0IHRoaXMuc3RvcmUuZ2V0KC4uLnNldHRpbmdzKTtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgY29uZmlndXJhdGlvbiBzdG9yZWQ6ICR7SlNPTi5zdHJpbmdpZnkoeyBzdG9yZWQgfSl9YCk7XG5cbiAgICBjb25zdCByZXN1bHQgPVxuICAgICAgc2V0dGluZ3MgJiYgc2V0dGluZ3MubGVuZ3RoID09PSAxXG4gICAgICAgID8gdGhpcy5nZXRTZXR0aW5nVmFsdWUoc2V0dGluZ3NbMF0sIHN0b3JlZFtzZXR0aW5nc1swXV0pXG4gICAgICAgIDogKHNldHRpbmdzLmxlbmd0aCA+IDFcbiAgICAgICAgICAgID8gc2V0dGluZ3NcbiAgICAgICAgICAgIDogQXJyYXkuZnJvbSh0aGlzLl9zZXR0aW5ncy5rZXlzKCkpXG4gICAgICAgICAgKS5yZWR1Y2UoXG4gICAgICAgICAgICAoYWNjdW0sIGtleSkgPT4gKHtcbiAgICAgICAgICAgICAgLi4uYWNjdW0sXG4gICAgICAgICAgICAgIFtrZXldOiB0aGlzLmdldFNldHRpbmdWYWx1ZShrZXksIHN0b3JlZFtrZXldKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAge30sXG4gICAgICAgICAgKTtcblxuICAgIC8vIENsb25lIHRoZSByZXN1bHQuIFRoaXMgYXZvaWRzIHRoZSBvYmplY3QgcmVmZXJlbmNlIGNhbiBiZSBjaGFuZ2VkIHdoZW4gbWFuYWdpbmcgdGhlIHJlc3VsdC5cbiAgICByZXR1cm4gY2xvbmVEZWVwKHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBhIHRoZSB2YWx1ZSBmb3IgYSBzdWJzZXQgb2Ygc2V0dGluZ3NcbiAgICogQHBhcmFtIHNldHRpbmdzXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBzZXQoc2V0dGluZ3M6IHsgW2tleTogc3RyaW5nXTogYW55IH0pIHtcbiAgICBjb25zdCBzZXR0aW5nc0FyZVJlZ2lzdGVyZWQgPSBPYmplY3QuZW50cmllcyhzZXR0aW5ncylcbiAgICAgIC5tYXAoKFtrZXldKSA9PlxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5oYXMoa2V5KSA/IG51bGwgOiBgJHtrZXl9IGlzIG5vdCByZWdpc3RlcmVkYCxcbiAgICAgIClcbiAgICAgIC5maWx0ZXIodmFsdWUgPT4gdmFsdWUpO1xuICAgIGlmIChzZXR0aW5nc0FyZVJlZ2lzdGVyZWQubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c2V0dGluZ3NBcmVSZWdpc3RlcmVkLmpvaW4oJywgJyl9IGFyZSBub3QgcmVnaXN0ZXJlZGApO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBPYmplY3QuZW50cmllcyhzZXR0aW5ncylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB0aGlzLl9zZXR0aW5ncy5nZXQoa2V5KT8udmFsaWRhdGU/Lih2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JcbiAgICAgICAgICA/IGBzZXR0aW5nIFske2tleX1dOiAke3ZhbGlkYXRpb25FcnJvcn1gXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICB9KVxuICAgICAgLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZSk7XG4gICAgaWYgKHZhbGlkYXRpb25FcnJvcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbGlkYXRpb24gZXJyb3JzOiAke3ZhbGlkYXRpb25FcnJvcnMuam9pbignXFxuJyl9YCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlU3RvcmUgPSBhd2FpdCB0aGlzLnN0b3JlLnNldChzZXR0aW5ncyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVpcmVtZW50czogdGhpcy5jaGVja1JlcXVpcmVtZW50c09uVXBkYXRlZFNldHRpbmdzKFxuICAgICAgICBPYmplY3Qua2V5cyhyZXNwb25zZVN0b3JlKSxcbiAgICAgICksXG4gICAgICB1cGRhdGU6IHJlc3BvbnNlU3RvcmUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB0aGUgdmFsdWVzIGZvciBhbGwgc2V0dGluZ3Mgb3IgYSBzdWJzZXQgb2YgdGhlbVxuICAgKiBAcGFyYW0gcmVzdFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgY2xlYXIoLi4uc2V0dGluZ3M6IHN0cmluZ1tdKSB7XG4gICAgaWYgKHNldHRpbmdzLmxlbmd0aCkge1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYENsZWFuIHNldHRpbmdzOiAke3NldHRpbmdzLmpvaW4oJywgJyl9YCk7XG4gICAgICBjb25zdCByZXNwb25zZVN0b3JlID0gYXdhaXQgdGhpcy5zdG9yZS5jbGVhciguLi5zZXR0aW5ncyk7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKCdTZXR0aW5ncyB3ZXJlIGNsZWFyZWQnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmVtZW50czogdGhpcy5jaGVja1JlcXVpcmVtZW50c09uVXBkYXRlZFNldHRpbmdzKFxuICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3BvbnNlU3RvcmUpLFxuICAgICAgICApLFxuICAgICAgICB1cGRhdGU6IHJlc3BvbnNlU3RvcmUsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jbGVhciguLi5BcnJheS5mcm9tKHRoaXMuX3NldHRpbmdzLmtleXMoKSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgdmFsdWVzIGZvciBhbGwgc2V0dGluZ3Mgb3IgYSBzdWJzZXQgb2YgdGhlbVxuICAgKiBAcGFyYW0gc2V0dGluZ3NcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIHJlc2V0KC4uLnNldHRpbmdzOiBzdHJpbmdbXSkge1xuICAgIGlmIChzZXR0aW5ncy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBSZXNldCBzZXR0aW5nczogJHtzZXR0aW5ncy5qb2luKCcsICcpfWApO1xuICAgICAgY29uc3QgdXBkYXRlZFNldHRpbmdzID0gc2V0dGluZ3MucmVkdWNlKChhY2N1bSwgc2V0dGluZ0tleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYWNjdW0sXG4gICAgICAgICAgW3NldHRpbmdLZXldOiB0aGlzLmdldFNldHRpbmdWYWx1ZShzZXR0aW5nS2V5KSxcbiAgICAgICAgfTtcbiAgICAgIH0sIHt9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlU3RvcmUgPSBhd2FpdCB0aGlzLnN0b3JlLnNldCh1cGRhdGVkU2V0dGluZ3MpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbygnU2V0dGluZ3Mgd2VyZSByZXNldCcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWlyZW1lbnRzOiB0aGlzLmNoZWNrUmVxdWlyZW1lbnRzT25VcGRhdGVkU2V0dGluZ3MoXG4gICAgICAgICAgT2JqZWN0LmtleXMocmVzcG9uc2VTdG9yZSksXG4gICAgICAgICksXG4gICAgICAgIHVwZGF0ZTogcmVzcG9uc2VTdG9yZSxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlc2V0KC4uLnRoaXMuX3NldHRpbmdzLmtleXMoKSk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJDYXRlZ29yeSh7IGlkLCAuLi5yZXN0IH0pIHtcbiAgICBpZiAodGhpcy5fY2F0ZWdvcmllcy5oYXMoaWQpKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihgUmVnaXN0ZXJlZCBjYXRlZ29yeSBbJHtpZH1dYCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhdGVnb3J5IGV4aXN0cyBbJHtpZH1dYCk7XG4gICAgfVxuICAgIHRoaXMuX2NhdGVnb3JpZXMuc2V0KGlkLCByZXN0KTtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgUmVnaXN0ZXJlZCBjYXRlZ29yeSBbJHtpZH1dYCk7XG4gIH1cblxuICBnZXRVbmlxdWVDYXRlZ29yaWVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi5uZXcgU2V0KFxuICAgICAgICBBcnJheS5mcm9tKHRoaXMuX3NldHRpbmdzLmVudHJpZXMoKSlcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKFssIHsgaXNDb25maWd1cmFibGVGcm9tU2V0dGluZ3MgfV0pID0+IGlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzLFxuICAgICAgICAgIClcbiAgICAgICAgICAubWFwKChbLCB7IGNhdGVnb3J5IH1dKSA9PiBjYXRlZ29yeSksXG4gICAgICApLFxuICAgIF1cbiAgICAgIC5tYXAoY2F0ZWdvcnlJRCA9PiB0aGlzLl9jYXRlZ29yaWVzLmdldChTdHJpbmcoY2F0ZWdvcnlJRCkpKVxuICAgICAgLnNvcnQoKGNhdGVnb3J5QSwgY2F0ZWdvcnlCKSA9PiB7XG4gICAgICAgIGlmIChjYXRlZ29yeUEudGl0bGUgPiBjYXRlZ29yeUIudGl0bGUpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeUEudGl0bGUgPCBjYXRlZ29yeUIudGl0bGUpIHtcbiAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9KTtcbiAgfVxuICBwcml2YXRlIGVuaGFuY2VTZXR0aW5nRGVzY3JpcHRpb24oc2V0dGluZzogVENvbmZpZ3VyYXRpb25TZXR0aW5nKSB7XG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgb3B0aW9ucyB9ID0gc2V0dGluZztcbiAgICByZXR1cm4gW1xuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAuLi4ob3B0aW9ucz8uc2VsZWN0XG4gICAgICAgID8gW1xuICAgICAgICAgICAgYEFsbG93ZWQgdmFsdWVzOiAke29wdGlvbnMuc2VsZWN0XG4gICAgICAgICAgICAgIC5tYXAoKHsgdGV4dCwgdmFsdWUgfSkgPT4gZm9ybWF0TGFiZWxWYWx1ZVBhaXIodGV4dCwgdmFsdWUpKVxuICAgICAgICAgICAgICAuam9pbignLCAnKX0uYCxcbiAgICAgICAgICBdXG4gICAgICAgIDogW10pLFxuICAgICAgLi4uKG9wdGlvbnM/LnN3aXRjaFxuICAgICAgICA/IFtcbiAgICAgICAgICAgIGBBbGxvd2VkIHZhbHVlczogJHtbJ2VuYWJsZWQnLCAnZGlzYWJsZWQnXVxuICAgICAgICAgICAgICAubWFwKHMgPT5cbiAgICAgICAgICAgICAgICBmb3JtYXRMYWJlbFZhbHVlUGFpcihcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3dpdGNoLnZhbHVlc1tzXS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3dpdGNoLnZhbHVlc1tzXS52YWx1ZSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5qb2luKCcsICcpfS5gLFxuICAgICAgICAgIF1cbiAgICAgICAgOiBbXSksXG4gICAgICAuLi4ob3B0aW9ucz8ubnVtYmVyICYmICdtaW4nIGluIG9wdGlvbnMubnVtYmVyXG4gICAgICAgID8gW2BNaW5pbXVtIHZhbHVlOiAke29wdGlvbnMubnVtYmVyLm1pbn0uYF1cbiAgICAgICAgOiBbXSksXG4gICAgICAuLi4ob3B0aW9ucz8ubnVtYmVyICYmICdtYXgnIGluIG9wdGlvbnMubnVtYmVyXG4gICAgICAgID8gW2BNYXhpbXVtIHZhbHVlOiAke29wdGlvbnMubnVtYmVyLm1heH0uYF1cbiAgICAgICAgOiBbXSksXG4gICAgICAvLyBGaWxlIGV4dGVuc2lvbnNcbiAgICAgIC4uLihvcHRpb25zPy5maWxlPy5leHRlbnNpb25zXG4gICAgICAgID8gW2BTdXBwb3J0ZWQgZXh0ZW5zaW9uczogJHtvcHRpb25zLmZpbGUuZXh0ZW5zaW9ucy5qb2luKCcsICcpfS5gXVxuICAgICAgICA6IFtdKSxcbiAgICAgIC8vIEZpbGUgcmVjb21tZW5kZWQgZGltZW5zaW9uc1xuICAgICAgLi4uKG9wdGlvbnM/LmZpbGU/LnJlY29tbWVuZGVkPy5kaW1lbnNpb25zXG4gICAgICAgID8gW1xuICAgICAgICAgICAgYFJlY29tbWVuZGVkIGRpbWVuc2lvbnM6ICR7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZmlsZS5yZWNvbW1lbmRlZC5kaW1lbnNpb25zLndpZHRoXG4gICAgICAgICAgICB9eCR7b3B0aW9ucy5maWxlLnJlY29tbWVuZGVkLmRpbWVuc2lvbnMuaGVpZ2h0fSR7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZmlsZS5yZWNvbW1lbmRlZC5kaW1lbnNpb25zLnVuaXQgfHwgJydcbiAgICAgICAgICAgIH0uYCxcbiAgICAgICAgICBdXG4gICAgICAgIDogW10pLFxuICAgICAgLy8gRmlsZSBzaXplXG4gICAgICAuLi4ob3B0aW9ucz8uZmlsZT8uc2l6ZSAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMuZmlsZS5zaXplLm1pbkJ5dGVzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IFtgTWluaW11bSBmaWxlIHNpemU6ICR7Zm9ybWF0Qnl0ZXMob3B0aW9ucy5maWxlLnNpemUubWluQnl0ZXMpfS5gXVxuICAgICAgICA6IFtdKSxcbiAgICAgIC4uLihvcHRpb25zPy5maWxlPy5zaXplICYmXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5maWxlLnNpemUubWF4Qnl0ZXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gW2BNYXhpbXVtIGZpbGUgc2l6ZTogJHtmb3JtYXRCeXRlcyhvcHRpb25zLmZpbGUuc2l6ZS5tYXhCeXRlcyl9LmBdXG4gICAgICAgIDogW10pLFxuICAgICAgLy8gTXVsdGkgbGluZSB0ZXh0XG4gICAgICAuLi4ob3B0aW9ucz8ubWF4Um93cyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhSb3dzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IFtgTWF4aW11bSBhbW91bnQgb2YgbGluZXM6ICR7b3B0aW9ucy5tYXhSb3dzfS5gXVxuICAgICAgICA6IFtdKSxcbiAgICAgIC4uLihvcHRpb25zPy5taW5Sb3dzICYmIHR5cGVvZiBvcHRpb25zLm1pblJvd3MgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gW2BNaW5pbXVtIGFtb3VudCBvZiBsaW5lczogJHtvcHRpb25zLm1pblJvd3N9LmBdXG4gICAgICAgIDogW10pLFxuICAgICAgLi4uKG9wdGlvbnM/Lm1heExlbmd0aCAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhMZW5ndGggIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gW2BNYXhpbXVtIGxpbmVzIGxlbmd0aCBpcyAke29wdGlvbnMubWF4TGVuZ3RofSBjaGFyYWN0ZXJzLmBdXG4gICAgICAgIDogW10pLFxuICAgIF0uam9pbignICcpO1xuICB9XG4gIGdyb3VwU2V0dGluZ3NCeUNhdGVnb3J5KFxuICAgIF9zZXR0aW5nczogc3RyaW5nW10gfCBudWxsID0gbnVsbCxcbiAgICBmaWx0ZXJGdW5jdGlvbjpcbiAgICAgIHwgKChzZXR0aW5nOiBUQ29uZmlndXJhdGlvblNldHRpbmdXaXRoS2V5KSA9PiBib29sZWFuKVxuICAgICAgfCBudWxsID0gbnVsbCxcbiAgKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSAoXG4gICAgICBfc2V0dGluZ3MgJiYgQXJyYXkuaXNBcnJheShfc2V0dGluZ3MpXG4gICAgICAgID8gQXJyYXkuZnJvbSh0aGlzLl9zZXR0aW5ncy5lbnRyaWVzKCkpLmZpbHRlcigoW2tleV0pID0+XG4gICAgICAgICAgICBfc2V0dGluZ3MuaW5jbHVkZXMoa2V5KSxcbiAgICAgICAgICApXG4gICAgICAgIDogQXJyYXkuZnJvbSh0aGlzLl9zZXR0aW5ncy5lbnRyaWVzKCkpXG4gICAgKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcbiAgICAgIC4uLnZhbHVlLFxuICAgICAga2V5LFxuICAgIH0pKTtcblxuICAgIGNvbnN0IHNldHRpbmdzU29ydGVkQnlDYXRlZ29yaWVzID0gKFxuICAgICAgZmlsdGVyRnVuY3Rpb24gPyBzZXR0aW5ncy5maWx0ZXIoZmlsdGVyRnVuY3Rpb24pIDogc2V0dGluZ3NcbiAgICApXG4gICAgICAuc29ydCgoc2V0dGluZ0EsIHNldHRpbmdCKSA9PiBzZXR0aW5nQS5rZXk/LmxvY2FsZUNvbXBhcmU/LihzZXR0aW5nQi5rZXkpKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKGFjY3VtLCBwbHVnaW5TZXR0aW5nQ29uZmlndXJhdGlvbikgPT4gKHtcbiAgICAgICAgICAuLi5hY2N1bSxcbiAgICAgICAgICBbcGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb24uY2F0ZWdvcnldOiBbXG4gICAgICAgICAgICAuLi4oYWNjdW1bcGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb24uY2F0ZWdvcnldIHx8IFtdKSxcbiAgICAgICAgICAgIHsgLi4ucGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb24gfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAge30sXG4gICAgICApO1xuXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNldHRpbmdzU29ydGVkQnlDYXRlZ29yaWVzKVxuICAgICAgLm1hcCgoW2NhdGVnb3J5LCBzZXR0aW5nc10pID0+ICh7XG4gICAgICAgIGNhdGVnb3J5OiB0aGlzLl9jYXRlZ29yaWVzLmdldChTdHJpbmcoY2F0ZWdvcnkpKSxcbiAgICAgICAgc2V0dGluZ3MsXG4gICAgICB9KSlcbiAgICAgIC5maWx0ZXIoY2F0ZWdvcnlFbnRyeSA9PiBjYXRlZ29yeUVudHJ5LnNldHRpbmdzLmxlbmd0aCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQTBDLFNBQUFHLGdCQUFBQyxHQUFBLEVBQUFDLEdBQUEsRUFBQUMsS0FBQSxJQUFBRCxHQUFBLEdBQUFFLGNBQUEsQ0FBQUYsR0FBQSxPQUFBQSxHQUFBLElBQUFELEdBQUEsSUFBQUksTUFBQSxDQUFBQyxjQUFBLENBQUFMLEdBQUEsRUFBQUMsR0FBQSxJQUFBQyxLQUFBLEVBQUFBLEtBQUEsRUFBQUksVUFBQSxRQUFBQyxZQUFBLFFBQUFDLFFBQUEsb0JBQUFSLEdBQUEsQ0FBQUMsR0FBQSxJQUFBQyxLQUFBLFdB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
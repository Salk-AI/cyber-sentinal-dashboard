"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WazuhCorePlugin = void 0;
var _nodeCron = require("node-cron");
var _pluginServices = require("./plugin-services");
var _services = require("./services");
var _configuration = require("../common/services/configuration");
var _constants = require("../common/constants");
var _enhanceConfiguration = require("./services/enhance-configuration");
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
class WazuhCorePlugin {
  constructor(initializerContext) {
    this.initializerContext = initializerContext;
    _defineProperty(this, "logger", void 0);
    _defineProperty(this, "services", void 0);
    _defineProperty(this, "_internal", void 0);
    this.logger = initializerContext.logger.get();
    this.services = {};
    this._internal = {};
  }
  async setup(core, plugins) {
    this.logger.debug('wazuh_core: Setup');
    this.services.dashboardSecurity = (0, _services.createDashboardSecurity)(plugins);
    this._internal.configurationStore = new _services.ConfigurationStore(this.logger.get('configuration-store'), {
      cache_seconds: _constants.WAZUH_CORE_CONFIGURATION_CACHE_SECONDS,
      file: _constants.WAZUH_DATA_CONFIG_APP_PATH
    });
    this.services.configuration = new _configuration.Configuration(this.logger.get('configuration'), this._internal.configurationStore);

    // Enhance configuration service
    (0, _enhanceConfiguration.enhanceConfiguration)(this.services.configuration);

    // Register the plugin settings
    Object.entries(_constants.PLUGIN_SETTINGS).forEach(([key, value]) => this.services.configuration.register(key, value));

    // Add categories to the configuration
    Object.entries(_constants.PLUGIN_SETTINGS_CATEGORIES).forEach(([key, value]) => {
      this.services.configuration.registerCategory({
        ...value,
        id: key
      });
    });

    /* Workaround: Redefine the validation functions of cron.statistics.interval setting.
      Because the settings are defined in the backend and frontend side using the same definitions,
      the validation funtions are not defined there and has to be defined in the frontend side and backend side
      */
    const setting = this.services.configuration._settings.get('cron.statistics.interval');
    !setting.validateUIForm && (setting.validateUIForm = function (value) {
      return this.validate(value);
    });
    !setting.validate && (setting.validate = function (value) {
      return (0, _nodeCron.validate)(value) ? undefined : 'Interval is not valid.';
    });
    this.services.configuration.setup();
    this.services.manageHosts = new _services.ManageHosts(this.logger.get('manage-hosts'), this.services.configuration);
    this.services.serverAPIClient = new _services.ServerAPIClient(this.logger.get('server-api-client'), this.services.manageHosts, this.services.dashboardSecurity);
    this.services.manageHosts.setServerAPIClient(this.services.serverAPIClient);

    // Register a property to the context parameter of the endpoint handlers
    core.http.registerRouteHandlerContext('wazuh_core', (context, request) => {
      return {
        ...this.services,
        api: {
          client: {
            asInternalUser: this.services.serverAPIClient.asInternalUser,
            asCurrentUser: this.services.serverAPIClient.asScoped(context, request)
          }
        }
      };
    });
    return {
      ...this.services,
      api: {
        client: {
          asInternalUser: this.services.serverAPIClient.asInternalUser,
          asScoped: this.services.serverAPIClient.asScoped
        }
      }
    };
  }
  async start(core) {
    this.logger.debug('wazuhCore: Started');
    (0, _pluginServices.setCore)(core);
    await this.services.configuration.start();
    await this.services.manageHosts.start();
    return {
      ...this.services,
      api: {
        client: {
          asInternalUser: this.services.serverAPIClient.asInternalUser,
          asScoped: this.services.serverAPIClient.asScoped
        }
      }
    };
  }
  stop() {}
}
exports.WazuhCorePlugin = WazuhCorePlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUNyb24iLCJyZXF1aXJlIiwiX3BsdWdpblNlcnZpY2VzIiwiX3NlcnZpY2VzIiwiX2NvbmZpZ3VyYXRpb24iLCJfY29uc3RhbnRzIiwiX2VuaGFuY2VDb25maWd1cmF0aW9uIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwidmFsdWUiLCJfdG9Qcm9wZXJ0eUtleSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsIlN5bWJvbCIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiY2FsbCIsIlR5cGVFcnJvciIsIk51bWJlciIsIldhenVoQ29yZVBsdWdpbiIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbGl6ZXJDb250ZXh0IiwibG9nZ2VyIiwiZ2V0Iiwic2VydmljZXMiLCJfaW50ZXJuYWwiLCJzZXR1cCIsImNvcmUiLCJwbHVnaW5zIiwiZGVidWciLCJkYXNoYm9hcmRTZWN1cml0eSIsImNyZWF0ZURhc2hib2FyZFNlY3VyaXR5IiwiY29uZmlndXJhdGlvblN0b3JlIiwiQ29uZmlndXJhdGlvblN0b3JlIiwiY2FjaGVfc2Vjb25kcyIsIldBWlVIX0NPUkVfQ09ORklHVVJBVElPTl9DQUNIRV9TRUNPTkRTIiwiZmlsZSIsIldBWlVIX0RBVEFfQ09ORklHX0FQUF9QQVRIIiwiY29uZmlndXJhdGlvbiIsIkNvbmZpZ3VyYXRpb24iLCJlbmhhbmNlQ29uZmlndXJhdGlvbiIsImVudHJpZXMiLCJQTFVHSU5fU0VUVElOR1MiLCJmb3JFYWNoIiwicmVnaXN0ZXIiLCJQTFVHSU5fU0VUVElOR1NfQ0FURUdPUklFUyIsInJlZ2lzdGVyQ2F0ZWdvcnkiLCJpZCIsInNldHRpbmciLCJfc2V0dGluZ3MiLCJ2YWxpZGF0ZVVJRm9ybSIsInZhbGlkYXRlIiwidmFsaWRhdGVOb2RlQ3JvbkludGVydmFsIiwibWFuYWdlSG9zdHMiLCJNYW5hZ2VIb3N0cyIsInNlcnZlckFQSUNsaWVudCIsIlNlcnZlckFQSUNsaWVudCIsInNldFNlcnZlckFQSUNsaWVudCIsImh0dHAiLCJyZWdpc3RlclJvdXRlSGFuZGxlckNvbnRleHQiLCJjb250ZXh0IiwicmVxdWVzdCIsImFwaSIsImNsaWVudCIsImFzSW50ZXJuYWxVc2VyIiwiYXNDdXJyZW50VXNlciIsImFzU2NvcGVkIiwic3RhcnQiLCJzZXRDb3JlIiwic3RvcCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJwbHVnaW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgUGx1Z2luSW5pdGlhbGl6ZXJDb250ZXh0LFxuICBDb3JlU2V0dXAsXG4gIENvcmVTdGFydCxcbiAgUGx1Z2luLFxuICBMb2dnZXIsXG59IGZyb20gJ29wZW5zZWFyY2gtZGFzaGJvYXJkcy9zZXJ2ZXInO1xuaW1wb3J0IHsgdmFsaWRhdGUgYXMgdmFsaWRhdGVOb2RlQ3JvbkludGVydmFsIH0gZnJvbSAnbm9kZS1jcm9uJztcbmltcG9ydCB7XG4gIFBsdWdpblNldHVwLFxuICBXYXp1aENvcmVQbHVnaW5TZXR1cCxcbiAgV2F6dWhDb3JlUGx1Z2luU3RhcnQsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgc2V0Q29yZSB9IGZyb20gJy4vcGx1Z2luLXNlcnZpY2VzJztcbmltcG9ydCB7XG4gIE1hbmFnZUhvc3RzLFxuICBjcmVhdGVEYXNoYm9hcmRTZWN1cml0eSxcbiAgU2VydmVyQVBJQ2xpZW50LFxuICBVcGRhdGVSZWdpc3RyeSxcbiAgQ29uZmlndXJhdGlvblN0b3JlLFxufSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi9jb21tb24vc2VydmljZXMvY29uZmlndXJhdGlvbic7XG5pbXBvcnQge1xuICBQTFVHSU5fU0VUVElOR1MsXG4gIFBMVUdJTl9TRVRUSU5HU19DQVRFR09SSUVTLFxuICBXQVpVSF9DT1JFX0NPTkZJR1VSQVRJT05fQ0FDSEVfU0VDT05EUyxcbiAgV0FaVUhfREFUQV9DT05GSUdfQVBQX1BBVEgsXG59IGZyb20gJy4uL2NvbW1vbi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZW5oYW5jZUNvbmZpZ3VyYXRpb24gfSBmcm9tICcuL3NlcnZpY2VzL2VuaGFuY2UtY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBXYXp1aENvcmVQbHVnaW5cbiAgaW1wbGVtZW50cyBQbHVnaW48V2F6dWhDb3JlUGx1Z2luU2V0dXAsIFdhenVoQ29yZVBsdWdpblN0YXJ0Plxue1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyO1xuICBwcml2YXRlIHNlcnZpY2VzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICBwcml2YXRlIF9pbnRlcm5hbDogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluaXRpYWxpemVyQ29udGV4dDogUGx1Z2luSW5pdGlhbGl6ZXJDb250ZXh0KSB7XG4gICAgdGhpcy5sb2dnZXIgPSBpbml0aWFsaXplckNvbnRleHQubG9nZ2VyLmdldCgpO1xuICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICB0aGlzLl9pbnRlcm5hbCA9IHt9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNldHVwKFxuICAgIGNvcmU6IENvcmVTZXR1cCxcbiAgICBwbHVnaW5zOiBQbHVnaW5TZXR1cCxcbiAgKTogUHJvbWlzZTxXYXp1aENvcmVQbHVnaW5TZXR1cD4ge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKCd3YXp1aF9jb3JlOiBTZXR1cCcpO1xuXG4gICAgdGhpcy5zZXJ2aWNlcy5kYXNoYm9hcmRTZWN1cml0eSA9IGNyZWF0ZURhc2hib2FyZFNlY3VyaXR5KHBsdWdpbnMpO1xuXG4gICAgdGhpcy5faW50ZXJuYWwuY29uZmlndXJhdGlvblN0b3JlID0gbmV3IENvbmZpZ3VyYXRpb25TdG9yZShcbiAgICAgIHRoaXMubG9nZ2VyLmdldCgnY29uZmlndXJhdGlvbi1zdG9yZScpLFxuICAgICAge1xuICAgICAgICBjYWNoZV9zZWNvbmRzOiBXQVpVSF9DT1JFX0NPTkZJR1VSQVRJT05fQ0FDSEVfU0VDT05EUyxcbiAgICAgICAgZmlsZTogV0FaVUhfREFUQV9DT05GSUdfQVBQX1BBVEgsXG4gICAgICB9LFxuICAgICk7XG4gICAgdGhpcy5zZXJ2aWNlcy5jb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24oXG4gICAgICB0aGlzLmxvZ2dlci5nZXQoJ2NvbmZpZ3VyYXRpb24nKSxcbiAgICAgIHRoaXMuX2ludGVybmFsLmNvbmZpZ3VyYXRpb25TdG9yZSxcbiAgICApO1xuXG4gICAgLy8gRW5oYW5jZSBjb25maWd1cmF0aW9uIHNlcnZpY2VcbiAgICBlbmhhbmNlQ29uZmlndXJhdGlvbih0aGlzLnNlcnZpY2VzLmNvbmZpZ3VyYXRpb24pO1xuXG4gICAgLy8gUmVnaXN0ZXIgdGhlIHBsdWdpbiBzZXR0aW5nc1xuICAgIE9iamVjdC5lbnRyaWVzKFBMVUdJTl9TRVRUSU5HUykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PlxuICAgICAgdGhpcy5zZXJ2aWNlcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyKGtleSwgdmFsdWUpLFxuICAgICk7XG5cbiAgICAvLyBBZGQgY2F0ZWdvcmllcyB0byB0aGUgY29uZmlndXJhdGlvblxuICAgIE9iamVjdC5lbnRyaWVzKFBMVUdJTl9TRVRUSU5HU19DQVRFR09SSUVTKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIHRoaXMuc2VydmljZXMuY29uZmlndXJhdGlvbi5yZWdpc3RlckNhdGVnb3J5KHsgLi4udmFsdWUsIGlkOiBrZXkgfSk7XG4gICAgfSk7XG5cbiAgICAvKiBXb3JrYXJvdW5kOiBSZWRlZmluZSB0aGUgdmFsaWRhdGlvbiBmdW5jdGlvbnMgb2YgY3Jvbi5zdGF0aXN0aWNzLmludGVydmFsIHNldHRpbmcuXG4gICAgICBCZWNhdXNlIHRoZSBzZXR0aW5ncyBhcmUgZGVmaW5lZCBpbiB0aGUgYmFja2VuZCBhbmQgZnJvbnRlbmQgc2lkZSB1c2luZyB0aGUgc2FtZSBkZWZpbml0aW9ucyxcbiAgICAgIHRoZSB2YWxpZGF0aW9uIGZ1bnRpb25zIGFyZSBub3QgZGVmaW5lZCB0aGVyZSBhbmQgaGFzIHRvIGJlIGRlZmluZWQgaW4gdGhlIGZyb250ZW5kIHNpZGUgYW5kIGJhY2tlbmQgc2lkZVxuICAgICAgKi9cbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5zZXJ2aWNlcy5jb25maWd1cmF0aW9uLl9zZXR0aW5ncy5nZXQoXG4gICAgICAnY3Jvbi5zdGF0aXN0aWNzLmludGVydmFsJyxcbiAgICApO1xuICAgICFzZXR0aW5nLnZhbGlkYXRlVUlGb3JtICYmXG4gICAgICAoc2V0dGluZy52YWxpZGF0ZVVJRm9ybSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAhc2V0dGluZy52YWxpZGF0ZSAmJlxuICAgICAgKHNldHRpbmcudmFsaWRhdGUgPSBmdW5jdGlvbiAodmFsdWU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVOb2RlQ3JvbkludGVydmFsKHZhbHVlKVxuICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgOiAnSW50ZXJ2YWwgaXMgbm90IHZhbGlkLic7XG4gICAgICB9KTtcblxuICAgIHRoaXMuc2VydmljZXMuY29uZmlndXJhdGlvbi5zZXR1cCgpO1xuXG4gICAgdGhpcy5zZXJ2aWNlcy5tYW5hZ2VIb3N0cyA9IG5ldyBNYW5hZ2VIb3N0cyhcbiAgICAgIHRoaXMubG9nZ2VyLmdldCgnbWFuYWdlLWhvc3RzJyksXG4gICAgICB0aGlzLnNlcnZpY2VzLmNvbmZpZ3VyYXRpb24sXG4gICAgKTtcblxuICAgIHRoaXMuc2VydmljZXMuc2VydmVyQVBJQ2xpZW50ID0gbmV3IFNlcnZlckFQSUNsaWVudChcbiAgICAgIHRoaXMubG9nZ2VyLmdldCgnc2VydmVyLWFwaS1jbGllbnQnKSxcbiAgICAgIHRoaXMuc2VydmljZXMubWFuYWdlSG9zdHMsXG4gICAgICB0aGlzLnNlcnZpY2VzLmRhc2hib2FyZFNlY3VyaXR5LFxuICAgICk7XG5cbiAgICB0aGlzLnNlcnZpY2VzLm1hbmFnZUhvc3RzLnNldFNlcnZlckFQSUNsaWVudCh0aGlzLnNlcnZpY2VzLnNlcnZlckFQSUNsaWVudCk7XG5cbiAgICAvLyBSZWdpc3RlciBhIHByb3BlcnR5IHRvIHRoZSBjb250ZXh0IHBhcmFtZXRlciBvZiB0aGUgZW5kcG9pbnQgaGFuZGxlcnNcbiAgICBjb3JlLmh0dHAucmVnaXN0ZXJSb3V0ZUhhbmRsZXJDb250ZXh0KCd3YXp1aF9jb3JlJywgKGNvbnRleHQsIHJlcXVlc3QpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRoaXMuc2VydmljZXMsXG4gICAgICAgIGFwaToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgYXNJbnRlcm5hbFVzZXI6IHRoaXMuc2VydmljZXMuc2VydmVyQVBJQ2xpZW50LmFzSW50ZXJuYWxVc2VyLFxuICAgICAgICAgICAgYXNDdXJyZW50VXNlcjogdGhpcy5zZXJ2aWNlcy5zZXJ2ZXJBUElDbGllbnQuYXNTY29wZWQoXG4gICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuc2VydmljZXMsXG4gICAgICBhcGk6IHtcbiAgICAgICAgY2xpZW50OiB7XG4gICAgICAgICAgYXNJbnRlcm5hbFVzZXI6IHRoaXMuc2VydmljZXMuc2VydmVyQVBJQ2xpZW50LmFzSW50ZXJuYWxVc2VyLFxuICAgICAgICAgIGFzU2NvcGVkOiB0aGlzLnNlcnZpY2VzLnNlcnZlckFQSUNsaWVudC5hc1Njb3BlZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdGFydChjb3JlOiBDb3JlU3RhcnQpOiBQcm9taXNlPFdhenVoQ29yZVBsdWdpblN0YXJ0PiB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoJ3dhenVoQ29yZTogU3RhcnRlZCcpO1xuXG4gICAgc2V0Q29yZShjb3JlKTtcblxuICAgIGF3YWl0IHRoaXMuc2VydmljZXMuY29uZmlndXJhdGlvbi5zdGFydCgpO1xuICAgIGF3YWl0IHRoaXMuc2VydmljZXMubWFuYWdlSG9zdHMuc3RhcnQoKTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnNlcnZpY2VzLFxuICAgICAgYXBpOiB7XG4gICAgICAgIGNsaWVudDoge1xuICAgICAgICAgIGFzSW50ZXJuYWxVc2VyOiB0aGlzLnNlcnZpY2VzLnNlcnZlckFQSUNsaWVudC5hc0ludGVybmFsVXNlcixcbiAgICAgICAgICBhc1Njb3BlZDogdGhpcy5zZXJ2aWNlcy5zZXJ2ZXJBUElDbGllbnQuYXNTY29wZWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc3RvcCgpIHt9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQU9BLElBQUFBLFNBQUEsR0FBQUMsT0FBQTtBQU1BLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUYsT0FBQTtBQU9BLElBQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUosT0FBQTtBQU1BLElBQUFLLHFCQUFBLEdBQUFMLE9BQUE7QUFBd0UsU0FBQU0sZ0JBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxLQUFBLElBQUFELEdBQUEsR0FBQUUsY0FBQSxDQUFBRixHQUFBLE9BQUFBLEdBQUEsSUFBQUQsR0FBQSxJQUFBSSxNQUFBLENBQUFDLGNBQUEsQ0FBQUwsR0FBQSxFQUFBQyxHQUFBLElBQUFDLEtBQUEsRUFBQUEsS0FBQSxFQUFBSSxVQUFBLFFBQUFDLFlBQUEsUUFB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
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getUserPreferences = void 0;
var _lodash = _interopRequireDefault(require("lodash"));
var _constants = require("../../../common/constants");
var _savedObject = require("../saved-object");
var _pluginServices = require("../../plugin-services");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const getUserPreferences = async username => {
  try {
    const userPreferences = await (0, _savedObject.getSavedObject)(_constants.SAVED_OBJECT_USER_PREFERENCES, username);
    const userPreferencesWithoutUsername = _lodash.default.omit(userPreferences, 'username');
    return userPreferencesWithoutUsername;
  } catch (error) {
    const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Error trying to get user preferences';
    const {
      logger
    } = (0, _pluginServices.getWazuhCheckUpdatesServices)();
    logger.error(message);
    return Promise.reject(error);
  }
};
exports.getUserPreferences = getUserPreferences;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uc3RhbnRzIiwiX3NhdmVkT2JqZWN0IiwiX3BsdWdpblNlcnZpY2VzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJnZXRVc2VyUHJlZmVyZW5jZXMiLCJ1c2VybmFtZSIsInVzZXJQcmVmZXJlbmNlcyIsImdldFNhdmVkT2JqZWN0IiwiU0FWRURfT0JKRUNUX1VTRVJfUFJFRkVSRU5DRVMiLCJ1c2VyUHJlZmVyZW5jZXNXaXRob3V0VXNlcm5hbWUiLCJfIiwib21pdCIsImVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwibG9nZ2VyIiwiZ2V0V2F6dWhDaGVja1VwZGF0ZXNTZXJ2aWNlcyIsIlByb21pc2UiLCJyZWplY3QiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiZ2V0LXVzZXItcHJlZmVyZW5jZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IFNBVkVEX09CSkVDVF9VU0VSX1BSRUZFUkVOQ0VTIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBVc2VyUHJlZmVyZW5jZXMgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U2F2ZWRPYmplY3QgfSBmcm9tICcuLi9zYXZlZC1vYmplY3QnO1xuaW1wb3J0IHsgZ2V0V2F6dWhDaGVja1VwZGF0ZXNTZXJ2aWNlcyB9IGZyb20gJy4uLy4uL3BsdWdpbi1zZXJ2aWNlcyc7XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyUHJlZmVyZW5jZXMgPSBhc3luYyAoXG4gIHVzZXJuYW1lOiBzdHJpbmcsXG4pOiBQcm9taXNlPFVzZXJQcmVmZXJlbmNlcz4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJQcmVmZXJlbmNlcyA9IChhd2FpdCBnZXRTYXZlZE9iamVjdChcbiAgICAgIFNBVkVEX09CSkVDVF9VU0VSX1BSRUZFUkVOQ0VTLFxuICAgICAgdXNlcm5hbWUsXG4gICAgKSkgYXMgVXNlclByZWZlcmVuY2VzO1xuXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzV2l0aG91dFVzZXJuYW1lID0gXy5vbWl0KHVzZXJQcmVmZXJlbmNlcywgJ3VzZXJuYW1lJyk7XG5cbiAgICByZXR1cm4gdXNlclByZWZlcmVuY2VzV2l0aG91dFVzZXJuYW1lO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICA/IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgOiB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZXJyb3JcbiAgICAgICAgOiAnRXJyb3IgdHJ5aW5nIHRvIGdldCB1c2VyIHByZWZlcmVuY2VzJztcblxuICAgIGNvbnN0IHsgbG9nZ2VyIH0gPSBnZXRXYXp1aENoZWNrVXBkYXRlc1NlcnZpY2VzKCk7XG5cbiAgICBsb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRCxPQUFBO0FBRUEsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSCxPQUFBO0FBQXFFLFNBQUFELHVCQUFBSyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRTlELE1BQU1HLGtCQUFrQixHQUFHLE1BQ2hDQyxRQUFnQixJQUNhO0VBQzdCLElBQUk7SUFDRixNQUFNQyxlQUFlLEdBQUksTUFBTSxJQUFBQywyQkFBYyxFQUMzQ0Msd0NBQTZCLEVBQzdCSCxRQUNGLENBQXFCO0lBRXJCLE1BQU1JLDhCQUE4QixHQUFHQyxlQUFDLENBQUNDLElBQUksQ0FBQ0wsZUFBZSxFQUFFLFVBQVUsQ0FBQztJQUUxRSxPQUFPRyw4QkFBOEI7RUFDdkMsQ0FBQyxDQUFDLE9BQU9HLEtBQUssRUFBRTtJQUNkLE1BQU1DLE9BQU8sR0FDWEQsS0FBSyxZQUFZRSxLQUFLLEdBQ2xCRixLQUFLLENBQUNDLE9BQU8sR0FDYixPQUFPRCxLQUFLLEtBQUssUUFBUSxHQUN6QkEsS0FBSyxHQUNMLHNDQUFzQztJQUU1QyxNQUFNO01BQUVHO0lBQU8sQ0FBQyxHQUFHLElBQUFDLDRDQUE0QixFQUFDLENBQUM7SUFFakRELE1BQU0sQ0FBQ0gsS0FBSyxDQUFDQyxPQUFPLENBQUM7SUFDckIsT0FBT0ksT0FBTyxDQUFDQyxNQUFNLENBQUNOLEtBQUssQ0FBQztFQUM5QjtBQUNGLENBQUM7QUFBQ08sT0FBQSxDQUFBZixrQkFBQSxHQUFBQSxrQkFBQSJ9
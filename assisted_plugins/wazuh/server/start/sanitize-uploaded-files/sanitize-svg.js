"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = sanitizeUploadedSVG;
var _fs = _interopRequireDefault(require("fs"));
var _glob = _interopRequireDefault(require("glob"));
var _path = _interopRequireDefault(require("path"));
var _sanitizer = require("../../lib/sanitizer");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/**
 * This task checks for custom SVG files uploaded by the user and sanitizes them.
 * The goal is to sanitize any previously uploaded SVG file.
 * @param context
 * @returns
 */
async function sanitizeUploadedSVG(context) {
  // Create a wrapper function that logs to plugin files and platform logging system
  const createLog = level => message => {
    context.wazuh.logger[level](`sanitize:sanitizeUploadedSVG: ${message}`);
  };

  // Create the logger
  const logger = {
    info: createLog('info'),
    warn: createLog('warn'),
    error: createLog('error'),
    debug: createLog('debug')
  };
  try {
    logger.debug('Task sanitize SVG started');
    logger.debug('Get plugins configuration');
    const configuration = await context.wazuh_core.configuration.get();
    const logosSettingKeys = ['customization.logo.sidebar', 'customization.logo.app', 'customization.logo.healthcheck'];
    logger.debug('Check configuration for custom branding uploaded SVG files');
    // Check each of the possible custom settings uploaded files look for SVG to sanitize
    logosSettingKeys.forEach(async logoKey => {
      const logoSetting = context.wazuh_core.configuration._settings.get(logoKey);
      const customLogoPath = configuration[logoKey];
      if (!logoSetting || !customLogoPath) {
        logger.debug(`Logo [${logoKey}] not customized. Skip.`);
        return;
      }

      // Parse the configured logo information and remove the timestamp used as version control
      const configuredCustomLogo = {
        subpath: _path.default.dirname(customLogoPath),
        fileName: _path.default.basename(customLogoPath.replace(/\?v=[\d].*/g, '')),
        fileExtension: _path.default.extname(customLogoPath.replace(/\?v=[\d].*/g, ''))
      };

      // If the configured custom logo is not a SVG file there's nothing to do
      if (configuredCustomLogo.fileExtension.toLocaleLowerCase() !== '.svg') {
        return;
      }

      // The assets folder is the base folder used in the frontend. It's concatenated with the path configured in the
      const targetDirectory = _path.default.join(__dirname, '../../../public/assets', configuredCustomLogo.subpath);

      // If the setting folder doesn't exist abort
      if (!_fs.default.existsSync(targetDirectory)) {
        return;
      }

      // Read the file contents
      const fileFullPath = _path.default.join(targetDirectory, configuredCustomLogo.fileName);

      // Get the files related to the setting
      const file = _glob.default.sync(fileFullPath);

      // If the file doesn't exists abort
      if (!(file !== null && file !== void 0 && file.length)) {
        return;
      }
      const originalFileBuffer = _fs.default.readFileSync(fileFullPath);

      // Sanitize the file contents
      const originalSVGString = originalFileBuffer.toString();
      const cleanSVG = (0, _sanitizer.sanitizeSVG)(originalSVGString);
      const cleanFileBuffer = Buffer.from(cleanSVG);

      // Check if any changes were made in the sanitization process ignoring white spaces
      // If any change was made then save the sanitized content
      if (originalSVGString.replace(/\s/g, '') != cleanSVG.replace(/\s/g, '')) {
        logger.debug(`${configuredCustomLogo.fileName} SVG file sanitized`);
        // Delete the original file
        _fs.default.unlinkSync(fileFullPath);

        // Save the clean file in the target directory
        _fs.default.writeFileSync(fileFullPath, cleanFileBuffer);

        // Update the setting in the configuration cache
        const pluginSettingValue = logoSetting.options.file.store.resolveStaticURL(configuredCustomLogo.fileName);
        await context.wazuh_core.configuration.set({
          [logoKey]: pluginSettingValue
        });
      }
    });
    logger.debug('Task finished');
  } catch (error) {
    logger.error(`Error: ${error.message}`);
  }
}
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9nbG9iIiwiX3BhdGgiLCJfc2FuaXRpemVyIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzYW5pdGl6ZVVwbG9hZGVkU1ZHIiwiY29udGV4dCIsImNyZWF0ZUxvZyIsImxldmVsIiwibWVzc2FnZSIsIndhenVoIiwibG9nZ2VyIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsImRlYnVnIiwiY29uZmlndXJhdGlvbiIsIndhenVoX2NvcmUiLCJnZXQiLCJsb2dvc1NldHRpbmdLZXlzIiwiZm9yRWFjaCIsImxvZ29LZXkiLCJsb2dvU2V0dGluZyIsIl9zZXR0aW5ncyIsImN1c3RvbUxvZ29QYXRoIiwiY29uZmlndXJlZEN1c3RvbUxvZ28iLCJzdWJwYXRoIiwicGF0aCIsImRpcm5hbWUiLCJmaWxlTmFtZSIsImJhc2VuYW1lIiwicmVwbGFjZSIsImZpbGVFeHRlbnNpb24iLCJleHRuYW1lIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJ0YXJnZXREaXJlY3RvcnkiLCJqb2luIiwiX19kaXJuYW1lIiwiZnMiLCJleGlzdHNTeW5jIiwiZmlsZUZ1bGxQYXRoIiwiZmlsZSIsImdsb2IiLCJzeW5jIiwibGVuZ3RoIiwib3JpZ2luYWxGaWxlQnVmZmVyIiwicmVhZEZpbGVTeW5jIiwib3JpZ2luYWxTVkdTdHJpbmciLCJ0b1N0cmluZyIsImNsZWFuU1ZHIiwic2FuaXRpemVTVkciLCJjbGVhbkZpbGVCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidW5saW5rU3luYyIsIndyaXRlRmlsZVN5bmMiLCJwbHVnaW5TZXR0aW5nVmFsdWUiLCJvcHRpb25zIiwic3RvcmUiLCJyZXNvbHZlU3RhdGljVVJMIiwic2V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInNhbml0aXplLXN2Zy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IGdsb2IgZnJvbSAnZ2xvYic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHNhbml0aXplU1ZHIH0gZnJvbSAnLi4vLi4vbGliL3Nhbml0aXplcic7XG5cbi8qKlxuICogVGhpcyB0YXNrIGNoZWNrcyBmb3IgY3VzdG9tIFNWRyBmaWxlcyB1cGxvYWRlZCBieSB0aGUgdXNlciBhbmQgc2FuaXRpemVzIHRoZW0uXG4gKiBUaGUgZ29hbCBpcyB0byBzYW5pdGl6ZSBhbnkgcHJldmlvdXNseSB1cGxvYWRlZCBTVkcgZmlsZS5cbiAqIEBwYXJhbSBjb250ZXh0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBzYW5pdGl6ZVVwbG9hZGVkU1ZHKGNvbnRleHQpIHtcbiAgLy8gQ3JlYXRlIGEgd3JhcHBlciBmdW5jdGlvbiB0aGF0IGxvZ3MgdG8gcGx1Z2luIGZpbGVzIGFuZCBwbGF0Zm9ybSBsb2dnaW5nIHN5c3RlbVxuICBjb25zdCBjcmVhdGVMb2cgPSAobGV2ZWw6IHN0cmluZykgPT4gbWVzc2FnZSA9PiB7XG4gICAgY29udGV4dC53YXp1aC5sb2dnZXJbbGV2ZWxdKGBzYW5pdGl6ZTpzYW5pdGl6ZVVwbG9hZGVkU1ZHOiAke21lc3NhZ2V9YCk7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIHRoZSBsb2dnZXJcbiAgY29uc3QgbG9nZ2VyID0ge1xuICAgIGluZm86IGNyZWF0ZUxvZygnaW5mbycpLFxuICAgIHdhcm46IGNyZWF0ZUxvZygnd2FybicpLFxuICAgIGVycm9yOiBjcmVhdGVMb2coJ2Vycm9yJyksXG4gICAgZGVidWc6IGNyZWF0ZUxvZygnZGVidWcnKSxcbiAgfTtcblxuICB0cnkge1xuICAgIGxvZ2dlci5kZWJ1ZygnVGFzayBzYW5pdGl6ZSBTVkcgc3RhcnRlZCcpO1xuXG4gICAgbG9nZ2VyLmRlYnVnKCdHZXQgcGx1Z2lucyBjb25maWd1cmF0aW9uJyk7XG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9IGF3YWl0IGNvbnRleHQud2F6dWhfY29yZS5jb25maWd1cmF0aW9uLmdldCgpO1xuICAgIGNvbnN0IGxvZ29zU2V0dGluZ0tleXMgPSBbXG4gICAgICAnY3VzdG9taXphdGlvbi5sb2dvLnNpZGViYXInLFxuICAgICAgJ2N1c3RvbWl6YXRpb24ubG9nby5hcHAnLFxuICAgICAgJ2N1c3RvbWl6YXRpb24ubG9nby5oZWFsdGhjaGVjaycsXG4gICAgXTtcblxuICAgIGxvZ2dlci5kZWJ1ZygnQ2hlY2sgY29uZmlndXJhdGlvbiBmb3IgY3VzdG9tIGJyYW5kaW5nIHVwbG9hZGVkIFNWRyBmaWxlcycpO1xuICAgIC8vIENoZWNrIGVhY2ggb2YgdGhlIHBvc3NpYmxlIGN1c3RvbSBzZXR0aW5ncyB1cGxvYWRlZCBmaWxlcyBsb29rIGZvciBTVkcgdG8gc2FuaXRpemVcbiAgICBsb2dvc1NldHRpbmdLZXlzLmZvckVhY2goYXN5bmMgbG9nb0tleSA9PiB7XG4gICAgICBjb25zdCBsb2dvU2V0dGluZyA9XG4gICAgICAgIGNvbnRleHQud2F6dWhfY29yZS5jb25maWd1cmF0aW9uLl9zZXR0aW5ncy5nZXQobG9nb0tleSk7XG4gICAgICBjb25zdCBjdXN0b21Mb2dvUGF0aCA9IGNvbmZpZ3VyYXRpb25bbG9nb0tleV07XG4gICAgICBpZiAoIWxvZ29TZXR0aW5nIHx8ICFjdXN0b21Mb2dvUGF0aCkge1xuICAgICAgICBsb2dnZXIuZGVidWcoYExvZ28gWyR7bG9nb0tleX1dIG5vdCBjdXN0b21pemVkLiBTa2lwLmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIHRoZSBjb25maWd1cmVkIGxvZ28gaW5mb3JtYXRpb24gYW5kIHJlbW92ZSB0aGUgdGltZXN0YW1wIHVzZWQgYXMgdmVyc2lvbiBjb250cm9sXG4gICAgICBjb25zdCBjb25maWd1cmVkQ3VzdG9tTG9nbyA9IHtcbiAgICAgICAgc3VicGF0aDogcGF0aC5kaXJuYW1lKGN1c3RvbUxvZ29QYXRoKSxcbiAgICAgICAgZmlsZU5hbWU6IHBhdGguYmFzZW5hbWUoY3VzdG9tTG9nb1BhdGgucmVwbGFjZSgvXFw/dj1bXFxkXS4qL2csICcnKSksXG4gICAgICAgIGZpbGVFeHRlbnNpb246IHBhdGguZXh0bmFtZShjdXN0b21Mb2dvUGF0aC5yZXBsYWNlKC9cXD92PVtcXGRdLiovZywgJycpKSxcbiAgICAgIH07XG5cbiAgICAgIC8vIElmIHRoZSBjb25maWd1cmVkIGN1c3RvbSBsb2dvIGlzIG5vdCBhIFNWRyBmaWxlIHRoZXJlJ3Mgbm90aGluZyB0byBkb1xuICAgICAgaWYgKGNvbmZpZ3VyZWRDdXN0b21Mb2dvLmZpbGVFeHRlbnNpb24udG9Mb2NhbGVMb3dlckNhc2UoKSAhPT0gJy5zdmcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGFzc2V0cyBmb2xkZXIgaXMgdGhlIGJhc2UgZm9sZGVyIHVzZWQgaW4gdGhlIGZyb250ZW5kLiBJdCdzIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwYXRoIGNvbmZpZ3VyZWQgaW4gdGhlXG4gICAgICBjb25zdCB0YXJnZXREaXJlY3RvcnkgPSBwYXRoLmpvaW4oXG4gICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgJy4uLy4uLy4uL3B1YmxpYy9hc3NldHMnLFxuICAgICAgICBjb25maWd1cmVkQ3VzdG9tTG9nby5zdWJwYXRoLFxuICAgICAgKTtcblxuICAgICAgLy8gSWYgdGhlIHNldHRpbmcgZm9sZGVyIGRvZXNuJ3QgZXhpc3QgYWJvcnRcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyh0YXJnZXREaXJlY3RvcnkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUmVhZCB0aGUgZmlsZSBjb250ZW50c1xuICAgICAgY29uc3QgZmlsZUZ1bGxQYXRoID0gcGF0aC5qb2luKFxuICAgICAgICB0YXJnZXREaXJlY3RvcnksXG4gICAgICAgIGNvbmZpZ3VyZWRDdXN0b21Mb2dvLmZpbGVOYW1lLFxuICAgICAgKTtcblxuICAgICAgLy8gR2V0IHRoZSBmaWxlcyByZWxhdGVkIHRvIHRoZSBzZXR0aW5nXG4gICAgICBjb25zdCBmaWxlID0gZ2xvYi5zeW5jKGZpbGVGdWxsUGF0aCk7XG5cbiAgICAgIC8vIElmIHRoZSBmaWxlIGRvZXNuJ3QgZXhpc3RzIGFib3J0XG4gICAgICBpZiAoIWZpbGU/Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsRmlsZUJ1ZmZlciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlRnVsbFBhdGgpO1xuXG4gICAgICAvLyBTYW5pdGl6ZSB0aGUgZmlsZSBjb250ZW50c1xuICAgICAgY29uc3Qgb3JpZ2luYWxTVkdTdHJpbmcgPSBvcmlnaW5hbEZpbGVCdWZmZXIudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGNsZWFuU1ZHID0gc2FuaXRpemVTVkcob3JpZ2luYWxTVkdTdHJpbmcpO1xuICAgICAgY29uc3QgY2xlYW5GaWxlQnVmZmVyID0gQnVmZmVyLmZyb20oY2xlYW5TVkcpO1xuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgY2hhbmdlcyB3ZXJlIG1hZGUgaW4gdGhlIHNhbml0aXphdGlvbiBwcm9jZXNzIGlnbm9yaW5nIHdoaXRlIHNwYWNlc1xuICAgICAgLy8gSWYgYW55IGNoYW5nZSB3YXMgbWFkZSB0aGVuIHNhdmUgdGhlIHNhbml0aXplZCBjb250ZW50XG4gICAgICBpZiAob3JpZ2luYWxTVkdTdHJpbmcucmVwbGFjZSgvXFxzL2csICcnKSAhPSBjbGVhblNWRy5yZXBsYWNlKC9cXHMvZywgJycpKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgJHtjb25maWd1cmVkQ3VzdG9tTG9nby5maWxlTmFtZX0gU1ZHIGZpbGUgc2FuaXRpemVkYCk7XG4gICAgICAgIC8vIERlbGV0ZSB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVGdWxsUGF0aCk7XG5cbiAgICAgICAgLy8gU2F2ZSB0aGUgY2xlYW4gZmlsZSBpbiB0aGUgdGFyZ2V0IGRpcmVjdG9yeVxuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVGdWxsUGF0aCwgY2xlYW5GaWxlQnVmZmVyKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHNldHRpbmcgaW4gdGhlIGNvbmZpZ3VyYXRpb24gY2FjaGVcbiAgICAgICAgY29uc3QgcGx1Z2luU2V0dGluZ1ZhbHVlID1cbiAgICAgICAgICBsb2dvU2V0dGluZy5vcHRpb25zLmZpbGUuc3RvcmUucmVzb2x2ZVN0YXRpY1VSTChcbiAgICAgICAgICAgIGNvbmZpZ3VyZWRDdXN0b21Mb2dvLmZpbGVOYW1lLFxuICAgICAgICAgICk7XG4gICAgICAgIGF3YWl0IGNvbnRleHQud2F6dWhfY29yZS5jb25maWd1cmF0aW9uLnNldCh7XG4gICAgICAgICAgW2xvZ29LZXldOiBwbHVnaW5TZXR0aW5nVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbG9nZ2VyLmRlYnVnKCdUYXNrIGZpbmlzaGVkJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFVBQUEsR0FBQUgsT0FBQTtBQUFrRCxTQUFBRCx1QkFBQUssR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZSxlQUFlRyxtQkFBbUJBLENBQUNDLE9BQU8sRUFBRTtFQUN6RDtFQUNBLE1BQU1DLFNBQVMsR0FBSUMsS0FBYSxJQUFLQyxPQUFPLElBQUk7SUFDOUNILE9BQU8sQ0FBQ0ksS0FBSyxD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
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WazuhUtilsRoutes = WazuhUtilsRoutes;
var _controllers = require("../../controllers");
var _configSchema = require("@osd/config-schema");
var _constants = require("../../../common/constants");
/*
 * Wazuh app - Module for Wazuh utils routes
 * Copyright (C) 2015-2022 Wazuh, Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Find more information about this on the LICENSE file.
 */

function WazuhUtilsRoutes(router, services) {
  const ctrl = new _controllers.WazuhUtilsCtrl();

  // Returns the plugins configuration
  router.get({
    path: '/utils/configuration',
    validate: false
  }, async (context, request, response) => ctrl.getConfiguration(context, request, response));

  // Update the plugins configuration
  router.put({
    path: '/utils/configuration',
    validate: {
      // body: schema.any(),
      body: (value, response) => {
        try {
          const validationSchema = Array.from(services.configuration._settings.entries()).filter(([, {
            isConfigurableFromSettings
          }]) => isConfigurableFromSettings).reduce((accum, [pluginSettingKey, pluginSettingConfiguration]) => ({
            ...accum,
            [pluginSettingKey]: _configSchema.schema.maybe(_configSchema.schema.any({
              validate: pluginSettingConfiguration.validate ? pluginSettingConfiguration.validate.bind(pluginSettingConfiguration) : () => {}
            }))
          }), {});
          const validation = _configSchema.schema.object(validationSchema).validate(value);
          return response.ok(validation);
        } catch (error) {
          return response.badRequest(error.message);
        }
      }
    }
  }, async (context, request, response) => ctrl.updateConfiguration(context, request, response));

  // Upload an asset
  router.put({
    path: '/utils/configuration/files/{key}',
    validate: {
      params: (value, response) => {
        const validationSchema = Array.from(services.configuration._settings.entries())
        // key parameter should be a plugin setting of `filepicker` type
        .filter(([, {
          isConfigurableFromSettings,
          type
        }]) => type === _constants.EpluginSettingType.filepicker && isConfigurableFromSettings).map(([pluginSettingKey]) => _configSchema.schema.literal(pluginSettingKey));
        try {
          const validation = _configSchema.schema.object({
            key: _configSchema.schema.oneOf(validationSchema)
          }).validate(value);
          return response.ok(validation);
        } catch (error) {
          return response.badRequest(error.message);
        }
      },
      body: _configSchema.schema.object({
        // file: buffer
        file: _configSchema.schema.buffer()
      })
    },
    options: {
      body: {
        maxBytes: _constants.CUSTOMIZATION_ENDPOINT_PAYLOAD_UPLOAD_CUSTOM_FILE_MAXIMUM_BYTES
      }
    }
  }, async (context, request, response) => ctrl.uploadFile(context, request, response));

  // Remove an asset
  router.delete({
    path: '/utils/configuration/files/{key}',
    validate: {
      params: (value, response) => {
        const validationSchema = Array.from(services.configuration._settings.entries())
        // key parameter should be a plugin setting of `filepicker` type
        .filter(([, {
          isConfigurableFromSettings,
          type
        }]) => type === _constants.EpluginSettingType.filepicker && isConfigurableFromSettings).map(([pluginSettingKey]) => _configSchema.schema.literal(pluginSettingKey));
        try {
          const validation = _configSchema.schema.object({
            key: _configSchema.schema.oneOf(validationSchema)
          }).validate(value);
          return response.ok(validation);
        } catch (error) {
          return response.badRequest(error.message);
        }
      }
    }
  }, async (context, request, response) => ctrl.deleteFile(context, request, response));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29udHJvbGxlcnMiLCJyZXF1aXJlIiwiX2NvbmZpZ1NjaGVtYSIsIl9jb25zdGFudHMiLCJXYXp1aFV0aWxzUm91dGVzIiwicm91dGVyIiwic2VydmljZXMiLCJjdHJsIiwiV2F6dWhVdGlsc0N0cmwiLCJnZXQiLCJwYXRoIiwidmFsaWRhdGUiLCJjb250ZXh0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZ2V0Q29uZmlndXJhdGlvbiIsInB1dCIsImJvZHkiLCJ2YWx1ZSIsInZhbGlkYXRpb25TY2hlbWEiLCJBcnJheSIsImZyb20iLCJjb25maWd1cmF0aW9uIiwiX3NldHRpbmdzIiwiZW50cmllcyIsImZpbHRlciIsImlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzIiwicmVkdWNlIiwiYWNjdW0iLCJwbHVnaW5TZXR0aW5nS2V5IiwicGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb24iLCJzY2hlbWEiLCJtYXliZSIsImFueSIsImJpbmQiLCJ2YWxpZGF0aW9uIiwib2JqZWN0Iiwib2siLCJlcnJvciIsImJhZFJlcXVlc3QiLCJtZXNzYWdlIiwidXBkYXRlQ29uZmlndXJhdGlvbiIsInBhcmFtcyIsInR5cGUiLCJFcGx1Z2luU2V0dGluZ1R5cGUiLCJmaWxlcGlja2VyIiwibWFwIiwibGl0ZXJhbCIsImtleSIsIm9uZU9mIiwiZmlsZSIsImJ1ZmZlciIsIm9wdGlvbnMiLCJtYXhCeXRlcyIsIkNVU1RPTUlaQVRJT05fRU5EUE9JTlRfUEFZTE9BRF9VUExPQURfQ1VTVE9NX0ZJTEVfTUFYSU1VTV9CWVRFUyIsInVwbG9hZEZpbGUiLCJkZWxldGUiLCJkZWxldGVGaWxlIl0sInNvdXJjZXMiOlsid2F6dWgtdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFdhenVoIGFwcCAtIE1vZHVsZSBmb3IgV2F6dWggdXRpbHMgcm91dGVzXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMiBXYXp1aCwgSW5jLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogRmluZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgb24gdGhlIExJQ0VOU0UgZmlsZS5cbiAqL1xuaW1wb3J0IHsgV2F6dWhVdGlsc0N0cmwgfSBmcm9tICcuLi8uLi9jb250cm9sbGVycyc7XG5pbXBvcnQgeyBJUm91dGVyIH0gZnJvbSAnb3BlbnNlYXJjaF9kYXNoYm9hcmRzL3NlcnZlcic7XG5pbXBvcnQgeyBzY2hlbWEgfSBmcm9tICdAb3NkL2NvbmZpZy1zY2hlbWEnO1xuaW1wb3J0IHtcbiAgQ1VTVE9NSVpBVElPTl9FTkRQT0lOVF9QQVlMT0FEX1VQTE9BRF9DVVNUT01fRklMRV9NQVhJTVVNX0JZVEVTLFxuICBFcGx1Z2luU2V0dGluZ1R5cGUsXG59IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gV2F6dWhVdGlsc1JvdXRlcyhyb3V0ZXI6IElSb3V0ZXIsIHNlcnZpY2VzKSB7XG4gIGNvbnN0IGN0cmwgPSBuZXcgV2F6dWhVdGlsc0N0cmwoKTtcblxuICAvLyBSZXR1cm5zIHRoZSBwbHVnaW5zIGNvbmZpZ3VyYXRpb25cbiAgcm91dGVyLmdldChcbiAgICB7XG4gICAgICBwYXRoOiAnL3V0aWxzL2NvbmZpZ3VyYXRpb24nLFxuICAgICAgdmFsaWRhdGU6IGZhbHNlLFxuICAgIH0sXG4gICAgYXN5bmMgKGNvbnRleHQsIHJlcXVlc3QsIHJlc3BvbnNlKSA9PlxuICAgICAgY3RybC5nZXRDb25maWd1cmF0aW9uKGNvbnRleHQsIHJlcXVlc3QsIHJlc3BvbnNlKSxcbiAgKTtcblxuICAvLyBVcGRhdGUgdGhlIHBsdWdpbnMgY29uZmlndXJhdGlvblxuICByb3V0ZXIucHV0KFxuICAgIHtcbiAgICAgIHBhdGg6ICcvdXRpbHMvY29uZmlndXJhdGlvbicsXG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICAvLyBib2R5OiBzY2hlbWEuYW55KCksXG4gICAgICAgIGJvZHk6ICh2YWx1ZSwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvblNjaGVtYSA9IEFycmF5LmZyb20oXG4gICAgICAgICAgICAgIHNlcnZpY2VzLmNvbmZpZ3VyYXRpb24uX3NldHRpbmdzLmVudHJpZXMoKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoWywgeyBpc0NvbmZpZ3VyYWJsZUZyb21TZXR0aW5ncyB9XSkgPT5cbiAgICAgICAgICAgICAgICAgIGlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgKGFjY3VtLCBbcGx1Z2luU2V0dGluZ0tleSwgcGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb25dKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgLi4uYWNjdW0sXG4gICAgICAgICAgICAgICAgICBbcGx1Z2luU2V0dGluZ0tleV06IHNjaGVtYS5tYXliZShcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmFueSh7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6IHBsdWdpblNldHRpbmdDb25maWd1cmF0aW9uLnZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBsdWdpblNldHRpbmdDb25maWd1cmF0aW9uLnZhbGlkYXRlLmJpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luU2V0dGluZ0NvbmZpZ3VyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge30sXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBzY2hlbWEub2JqZWN0KHZhbGlkYXRpb25TY2hlbWEpLnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayh2YWxpZGF0aW9uKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIChjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSkgPT5cbiAgICAgIGN0cmwudXBkYXRlQ29uZmlndXJhdGlvbihjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSksXG4gICk7XG5cbiAgLy8gVXBsb2FkIGFuIGFzc2V0XG4gIHJvdXRlci5wdXQoXG4gICAge1xuICAgICAgcGF0aDogJy91dGlscy9jb25maWd1cmF0aW9uL2ZpbGVzL3trZXl9JyxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHBhcmFtczogKHZhbHVlLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25TY2hlbWEgPSBBcnJheS5mcm9tKFxuICAgICAgICAgICAgc2VydmljZXMuY29uZmlndXJhdGlvbi5fc2V0dGluZ3MuZW50cmllcygpLFxuICAgICAgICAgIClcbiAgICAgICAgICAgIC8vIGtleSBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgcGx1Z2luIHNldHRpbmcgb2YgYGZpbGVwaWNrZXJgIHR5cGVcbiAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgIChbLCB7IGlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzLCB0eXBlIH1dKSA9PlxuICAgICAgICAgICAgICAgIHR5cGUgPT09IEVwbHVnaW5TZXR0aW5nVHlwZS5maWxlcGlja2VyICYmXG4gICAgICAgICAgICAgICAgaXNDb25maWd1cmFibGVGcm9tU2V0dGluZ3MsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKChbcGx1Z2luU2V0dGluZ0tleV0pID0+IHNjaGVtYS5saXRlcmFsKHBsdWdpblNldHRpbmdLZXkpKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHNjaGVtYVxuICAgICAgICAgICAgICAub2JqZWN0KHsga2V5OiBzY2hlbWEub25lT2YodmFsaWRhdGlvblNjaGVtYSkgfSlcbiAgICAgICAgICAgICAgLnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayh2YWxpZGF0aW9uKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBzY2hlbWEub2JqZWN0KHtcbiAgICAgICAgICAvLyBmaWxlOiBidWZmZXJcbiAgICAgICAgICBmaWxlOiBzY2hlbWEuYnVmZmVyKCksXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIG1heEJ5dGVzOlxuICAgICAgICAgICAgQ1VTVE9NSVpBVElPTl9FTkRQT0lOVF9QQVlMT0FEX1VQTE9BRF9DVVNUT01fRklMRV9NQVhJTVVNX0JZVEVTLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIChjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSkgPT5cbiAgICAgIGN0cmwudXBsb2FkRmlsZShjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSksXG4gICk7XG5cbiAgLy8gUmVtb3ZlIGFuIGFzc2V0XG4gIHJvdXRlci5kZWxldGUoXG4gICAge1xuICAgICAgcGF0aDogJy91dGlscy9jb25maWd1cmF0aW9uL2ZpbGVzL3trZXl9JyxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHBhcmFtczogKHZhbHVlLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25TY2hlbWEgPSBBcnJheS5mcm9tKFxuICAgICAgICAgICAgc2VydmljZXMuY29uZmlndXJhdGlvbi5fc2V0dGluZ3MuZW50cmllcygpLFxuICAgICAgICAgIClcbiAgICAgICAgICAgIC8vIGtleSBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgcGx1Z2luIHNldHRpbmcgb2YgYGZpbGVwaWNrZXJgIHR5cGVcbiAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgIChbLCB7IGlzQ29uZmlndXJhYmxlRnJvbVNldHRpbmdzLCB0eXBlIH1dKSA9PlxuICAgICAgICAgICAgICAgIHR5cGUgPT09IEVwbHVnaW5TZXR0aW5nVHlwZS5maWxlcGlja2VyICYmXG4gICAgICAgICAgICAgICAgaXNDb25maWd1cmFibGVGcm9tU2V0dGluZ3MsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKChbcGx1Z2luU2V0dGluZ0tleV0pID0+IHNjaGVtYS5saXRlcmFsKHBsdWdpblNldHRpbmdLZXkpKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHNjaGVtYVxuICAgICAgICAgICAgICAub2JqZWN0KHsga2V5OiBzY2hlbWEub25lT2YodmFsaWRhdGlvblNjaGVtYSkgfSlcbiAgICAgICAgICAgICAgLnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayh2YWxpZGF0aW9uKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIChjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSkgPT5cbiAgICAgIGN0cmwuZGVsZXRlRmlsZShjb250ZXh0LCByZXF1ZXN0LCByZXNwb25zZSksXG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQVdBLElBQUFBLFlBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLGFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUYsT0FBQTtBQWRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBU08sU0FBU0csZ0JBQWdCQSxDQUFDQyxNQUFlLEVBQUVDLFFBQVEsRUFBRTtFQUMxRCxNQUFNQyxJQUFJLEdBQUcsSUFBSUMsMkJBQWMsQ0FBQyxDQUFDOztFQUVqQztFQUNBSCxNQUFNLENBQUNJLEdBQUcsQ0FDUjtJQUNFQyxJQUFJLEVBQUUsc0JBQXNCO0lBQzVCQyxRQUFRLEVBQUU7RUFDWixDQUFDLEVBQ0QsT0FBT0MsT0FBTyxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsS0FDL0JQLElBQUksQ0FBQ1EsZ0JBQWdCLENBQUNILE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLENBQ3BELENBQUM7O0VBRUQ7RUFDQVQsTUFBTSxDQUFDVyxHQUFHLENBQ1I7SUFDRU4sSUFBSSxFQUFFLHNCQUFzQjtJQUM1QkMsUUFBUSxFQUFFO01BQ1I7TUFDQU0sSUFBSSxFQUFFQSxDQUFDQyxLQUFLLEVBQUVKLFFBQVEsS0FBSztRQUN6QixJQUFJO1VBQ0YsTUFBTUssZ0JBQWdCLEdBQUdDLEtBQUssQ0FBQ0MsSUFBSSxDQUNqQ2YsUUFBUSxDQUFDZ0IsYUFBYSxDQUFDQyxTQUFTLENBQUNDLE9BQU8sQ0FBQyxDQUMzQyxDQUFDLENBQ0VDLE1BQU0sQ0FDTCxDQUFDLEdBQUc7WUFBRUM7VUFBMkIsQ0FBQyxDQUFDLEtBQ2pDQSwwQkFDSixDQUFDLENBQ0FDLE1BQU0sQ0FDTCxDQUFDQyxLQUFLLEVBQUUsQ0FBQ0MsZ0JBQWdCLEVBQUVDLDBCQUEwQixDQUFDLE1BQU07WUFDMUQsR0FBR0YsS0FBSztZQUNSLENBQUNDLGdCQUFnQixHQUFHRSxvQkFBTSxDQUFDQyxLQUFLLENBQzlCRCxvQkFBTSxDQUFDRSxHQUFHLENBQUM7Y0FDVHRCLFFBQVEsRUFBRW1CLDBCQUEwQixDQUFDbkIsUUFBUSxHQUN6Q21CLDBCQUEwQixDQUFDbkIsUUFBUSxDQUFDdUIsSUFBSSxDQUN0Q0osMEJBQ0YsQ0FBQyxHQUNELE1BQU0sQ0FBQztZQUNiLENBQUMsQ0FDSDtVQUNGLENBQUMsQ0FBQyxFQUNGLENBQUMsQ0FDSCxDQUFDO1VBQ0gsTUFBTUssVUFBVSxHQUFHSixvQkFBTSxDQUFDSyxNQUFNLENBQUNqQixnQkFBZ0IsQ0FBQyxDQUFDUixRQUFRLENBQUNPLEtBQUssQ0FBQztVQUNsRSxPQUFPSixRQUFRLENBQUN1QixFQUFFLENBQUNGLFVBQVUsQ0FBQztRQUNoQyxDQUFDLENBQUMsT0FBT0csS0FBSyxFQUFFO1VBQ2QsT0FBT3hCLFFBQVEsQ0FBQ3lCLFVBQVUsQ0FBQ0QsS0FBSyxDQUFDRSxPQUFPLENBQUM7UUFDM0M7TUFDRjtJQUNGO0VBQ0YsQ0FBQyxFQUNELE9BQU81QixPQUFPLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxLQUMvQlAsSUFBSSxDQUFDa0MsbUJBQW1CLENBQUM3QixPQUFPLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxDQUN2RCxDQUFDOztFQUVEO0VBQ0FULE1BQU0sQ0FBQ1csR0FBRyxDQUNSO0lBQ0VOLElBQUksRUFBRSxrQ0FBa0M7SUFDeENDLFFBQVEsRUFBRTtNQUNSK0IsTUFBTSxFQUFFQSxDQUFDeEIsS0FBSyxFQUFFSixRQUFRLEtBQUs7UUFDM0IsTUFBTUssZ0JBQWdCLEdBQUdDLEtBQUssQ0FBQ0MsSUFBSSxDQUNqQ2YsUUFBUSxDQUFDZ0IsYUFBYSxDQUFDQyxTQUFTLENBQUNDLE9BQU8sQ0FBQyxDQUMzQztRQUNFO1FBQUEsQ0FDQ0MsTUFBTSxDQUNMLENBQUMsR0FBRztVQUFFQywwQkFBMEI7VUFBRWlCO1FBQUssQ0FBQyxDQUFDLEtBQ3ZDQSxJQUFJLEtBQUtDLDZCQUFrQixDQUFDQyxVQUFVLElBQ3RDbkIsMEJBQ0osQ0FBQyxDQUNBb0IsR0FBRyxDQUFDLENBQUMsQ0FBQ2pCLGdCQUFnQixDQUFDLEtBQUtFLG9CQUFNLENBQUNnQixPQUFPLENBQUNsQixnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2hFLElBQUk7VUFDRixNQUFNTSxVQUFVLEdBQUdKLG9CQUFNLENBQ3RCSyxNQUFNLENBQUM7WUFBRVksR0FBRyxFQUFFakIsb0JBQU0sQ0FBQ2tCLEtBQUssQ0FBQzlCLGdCQUFnQjtVQUFFLENBQUMsQ0FBQyxDQUMvQ1IsUUFBUSxDQUFDTyxLQUFLLENBQUM7VUFDbEIsT0FBT0osUUFBUSxDQUFDdUIsRUFBRSxDQUFDRixVQUFVLENBQUM7UUFDaEMsQ0FBQyxDQUFDLE9BQU9HLEtBQUssRUFBRTtVQUNkLE9BQU94QixRQUFRLENBQUN5QixVQUFVLENBQUNELEtBQUssQ0FBQ0UsT0FBTyxDQUFDO1FBQzNDO01BQ0YsQ0FBQztNQUNEdkIsSUFBSSxFQUFFYyxvQkFBTSxDQUFDSyxNQUFNLENBQUM7UUFDbEI7UUFDQWMsSUFBSSxFQUFFbkIsb0JBQU0sQ0FBQ29CLE1BQU0sQ0FBQztNQUN0QixDQUFDO0lBQ0gsQ0FBQztJQUNEQyxPQUFPLEVBQUU7TUFDUG5DLElBQUksRUFBRTtRQUNKb0MsUUFBUSxFQUNOQztNQUNKO0lBQ0Y7RUFDRixDQUFDLEVBQ0QsT0FBTzFDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEtBQy9CUCxJQUFJLENBQUNnRCxVQUFVLENBQUMzQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxDQUM5QyxDQUFDOztFQUVEO0VBQ0FULE1BQU0sQ0FBQ21ELE1BQU0sQ0FDWDtJQUNFOUMsSUFBSSxFQUFFLGtDQUFrQztJQUN4Q0MsUUFBUSxFQUFFO01BQ1IrQixNQUFNLEVBQUVBLENBQUN4QixLQUFLLEVBQUVKLFFBQVEsS0FBSztRQUMzQixNQUFNSyxnQkFBZ0IsR0FBR0MsS0FBSyxDQUFDQyxJQUFJLENBQ2pDZixRQUFRLENBQUNnQixhQUFhLENBQUNDLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLENBQzNDO1FBQ0U7UUFBQSxDQUNDQyxNQUFNLENBQ0wsQ0FBQyxHQUFHO1VBQUVDLDBCQUEwQjtVQUFFaUI7UUFBSyxDQUFDLENBQUMsS0FDdkNBLElBQUksS0FBS0MsNkJBQWtCLENBQUNDLFVBQVUsSUFDdENuQiwwQkFDSixDQUFDLENBQ0FvQixHQUFHLENBQUMsQ0FBQyxDQUFDakIsZ0JBQWdCLENBQUMsS0FBS0Usb0JBQU0sQ0FBQ2dCLE9BQU8sQ0FBQ2xCLGdCQUFnQixDQUFDLENBQUM7UUFDaEUsSUFBSTtVQUNGLE1BQU1NLFVBQVUsR0FBR0osb0JBQU0sQ0FDdEJLLE1BQU0sQ0FBQztZQUFFWSxHQUFHLEVBQUVqQixvQkFBTSxDQUFDa0IsS0FBSyxDQUFDOUIsZ0JBQWdCO1VBQUUsQ0FBQyxDQUFDLENBQy9DUixRQUFRLENBQUNPLEtBQUssQ0FBQztVQUNsQixPQUFPSixRQUFRLENBQUN1QixFQUFFLENBQUNGLFVBQVUsQ0FBQztRQUNoQyxDQUFDLENBQUMsT0FBT0csS0FBSyxFQUFFO1VBQ2QsT0FBT3hCLFFBQVEsQ0FBQ3lCLFVBQVUsQ0FBQ0QsS0FBSyxDQUFDRSxPQUFPLENBQUM7UUFDM0M7TUFDRjtJQUNGO0VBQ0YsQ0FBQyxFQUNELE9BQU81QixPQUFPLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxLQUMvQlAsSUFBSSxDQUFDa0QsVUFBVSxDQUFDN0MsT0FBTyxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsQ0FDOUMsQ0FBQztBQUNIIn0=